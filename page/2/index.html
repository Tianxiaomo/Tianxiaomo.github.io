<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh,en">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
































<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.6.0" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.6.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.6.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.6.0" color="#222">









<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.6.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="田小默的博客">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="田小默的博客">
<meta property="og:locale" content="zh,en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="田小默的博客">






  <link rel="canonical" href="http://yoursite.com/page/2/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>田小默的博客</title>
  












  <noscript>
  <style>
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion .logo-line-before i { left: initial; }
    .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="zh,en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">田小默的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>Tags</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archives</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>About</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/12/16/DEEP-COMPLEX-NETWORKS-复数网络/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/12/16/DEEP-COMPLEX-NETWORKS-复数网络/" class="post-title-link" itemprop="url">DEEP COMPLEX NETWORKS(复数网络)</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-12-16 20:18:15" itemprop="dateCreated datePublished" datetime="2018-12-16T20:18:15+08:00">2018-12-16</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-25 20:23:13" itemprop="dateModified" datetime="2018-12-25T20:23:13+08:00">2018-12-25</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><a href="https://arxiv.org/abs/1705.09792" target="_blank" rel="noopener">论文地址</a></li>
<li><a href="https://github.com/ChihebTrabelsi/deep_complex_networks" target="_blank" rel="noopener">代码地址</a></li>
</ul>
<h1 id="各个基础组件"><a href="#各个基础组件" class="headerlink" title="各个基础组件"></a>各个基础组件</h1><h2 id="Complex-Convolution-复数卷积"><a href="#Complex-Convolution-复数卷积" class="headerlink" title="Complex Convolution (复数卷积)"></a>Complex Convolution (复数卷积)</h2><h2 id="Activation-激活"><a href="#Activation-激活" class="headerlink" title="Activation (激活)"></a>Activation (激活)</h2><h2 id="BatchNormalization-批量标准化"><a href="#BatchNormalization-批量标准化" class="headerlink" title="BatchNormalization (批量标准化)"></a>BatchNormalization (批量标准化)</h2><ol>
<li>实数的批量标准化</li>
</ol>
<p>$<br>x = \frac{x - E(x)}{x.std()}<br>$</p>
<ol start="2">
<li>复数Batch Normalization</li>
</ol>
<p>如果分别对实部和虚部进行标准化会导致分布为一个圆形，可能是一个椭圆，但是将此看作一个白化2d矢量，每一部分将按方差平方根进行缩放。通过x-E(x),然后乘一个2 X 2的协方差矩阵完成。</p>
<p>$<br>x = \frac{x - E(x)}{\sqrt{V} }<br>$</p>
<ul>
<li>E(x):x的均值</li>
<li>V = 协方差矩阵</li>
</ul>
<p>$\boldsymbol { V } = \left( \begin{array} { c c } { V _ { r r } } &amp; { V _ { r i } } \\ { V _ { i r } } &amp; { V _ { i i } } \end{array} \right) = \left( \begin{array} { c c } { \operatorname { Cov } ( \Re { x } , \Re { x } ) } &amp; { \operatorname { Cov } ( \Re { x } , \Im { x } ) } \\ { \operatorname { Cov } ( \Im { x } , \Re { x } ) } &amp; { \operatorname { Cov } ( \Im { x } , \Im { x } ) } \end{array} \right)<br>$</p>
<ul>
<li>Cov:协方差</li>
</ul>
<p><strong><em>根号V分之一的计算方法：</em></strong></p>
<p>对于2*2矩阵A</p>
<p>$A = \left[ \begin{array} { l l } { a } &amp; { b } \\ { c } &amp; { d } \end{array} \right]$</p>
<p>1/A公式：</p>
<p>$\begin{aligned} \frac{1}{A}  &amp; = \frac { 1 } { | A | } \left[ \begin{array} { c c } { d } &amp; { - b } \\ { - c } &amp; { a } \end{array} \right] \\ &amp; = \frac { 1 } { a d - b c } \left[ \begin{array} { c c } { d } &amp; { - b } \\ { - c } &amp; { a } \end{array} \right] \end{aligned}$</p>
<p>sqrt(A)公式：</p>
<p>$\sqrt{A} = \pm \frac { 1 } { \sqrt { \tau + 2 \delta } } \left( A + \delta I _ { 2 } \right) = \pm \frac { 1 } { \sqrt { \tau + 2 \delta } } \left[ \begin{array} { c c } { a + \delta } &amp; { b } \\ { c } &amp; { d + \delta } \end{array} \right]$</p>
<p>$\tau = \operatorname { trace } A = a + d$</p>
<p>$\delta = \pm \sqrt { \operatorname { det } A } = \pm \sqrt { a d - b c }$</p>
<p>所以，</p>
<p>$$\frac{1}{\sqrt(A)} = \frac{1}{\delta * \sqrt{\tau} - 2\delta}<br>\left[<br>\begin{array} { c c }<br>    { d + \delta } &amp; { -b } \\<br>    { -c } &amp; { a + \delta }<br>\end{array}<br>\right]$$</p>
<p>$$x=\frac{x-E(x)}<br>{\sqrt{V}} = \frac{1}<br>{ \delta * \sqrt { \tau } - 2 \delta }<br>\left[ \begin {array} { c c }<br>    { V _ { i i } + \delta } &amp; { -V _ { ri } } \\<br>    { -V_{ ir } }&amp;{ V_ { rr } + \delta }<br>\end{array}<br>\right]<br>(x-E(x))<br>$$</p>
<p>$$=\frac{1}<br>{\delta * \sqrt{\tau}-2\delta}<br>\left[\begin{array}{cc}<br>    {V_{ii}+\delta}&amp;{-V_{ri}}\\<br>    {-V_{ir}}&amp;{V_{rr}+\delta}<br>\end{array}\right] \left[\begin{array}{l}{x_{real}}\\{x_{image}}\end{array}\right]$$</p>
<p>参考：</p>
<p><a href="https://en.wikipedia.org/wiki/Square_root_of_a_2_by_2_matrix" target="_blank" rel="noopener">Square root of a 2 by 2 matrix</a></p>
<p><a href="http://mathworld.wolfram.com/MatrixInverse.html" target="_blank" rel="noopener">Matrix Inverse</a></p>
<p><a href="https://ccjou.wordpress.com/2016/04/20/%E4%BA%8C%E9%9A%8E%E6%96%B9%E9%99%A3%E7%9A%84%E5%B9%B3%E6%96%B9%E6%A0%B9/" target="_blank" rel="noopener">线代启示录</a></p>
<h3 id="Initialization-初始化"><a href="#Initialization-初始化" class="headerlink" title="Initialization (初始化)"></a>Initialization (初始化)</h3>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/19/SR超分辨率/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/19/SR超分辨率/" class="post-title-link" itemprop="url">'SR超分辨率'</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-19 12:49:54" itemprop="dateCreated datePublished" datetime="2018-11-19T12:49:54+08:00">2018-11-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-12-24 13:09:54" itemprop="dateModified" datetime="2018-12-24T13:09:54+08:00">2018-12-24</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>超分辨率技术(Super Resolution,SR)是从观测到的低分辨率图像重建出相应的高分辨率图像。应用可以从两个方面看待，一是提升设备的测量精度，力求恢复真实可靠的细节部分，如医学图像上超分辨率重建，卫星图像重建和监控设备人脸重建等；二是追求整体的视觉效果，细节要求不高，如低分辨率视频恢复，模糊相片恢复等.</p>
<h1 id="DL之前的SR"><a href="#DL之前的SR" class="headerlink" title="DL之前的SR"></a>DL之前的SR</h1><p>从信号处理角度看，低分辨率(Low Resolution)图像是无法恢复成高分辨率(High Resolution)图像，由香农采样定理可知，主要因为丢失了图像的高频信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">香农采样定理，又称奈奎斯特采样定理，是信息论，特别是通讯与信号处理学科中的一个重要基本结论。1924年奈奎斯特(Nyquist)就推导出在理想低通信道的最高大码元传输速率的公式：理想低通信道的最高大码元传输速率=2W*log2N 。（其中W是理想低通信道的带宽，N是电平强度）</span><br></pre></td></tr></table></figure>
<p>最简单的方法是梯度锐化和拉普拉斯锐化，但效果聊胜于无。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdb8eowovj30m407ldmq.jpg" alt="image"></p>
<p>这里说两种典型的SR算法，左图，找到图片中相似的大尺寸区域，然后利用进行SR,下面这个动图就是这样，这种方法缺点很明显。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdb4v9ygjg306y04cjso.jpg" alt="image"></p>
<p>右图，对各种边缘信息建立数据库，然后匹配，这个方法也很明显，鲁棒性不够。</p>
<h1 id="DL时代的SR"><a href="#DL时代的SR" class="headerlink" title="DL时代的SR"></a>DL时代的SR</h1><p>随着硬件计算性能的提升，人工智能进入了DL时代，SR也相应出现了新的使用DL的方法。</p>
<h2 id="标准介绍"><a href="#标准介绍" class="headerlink" title="标准介绍"></a>标准介绍</h2><ul>
<li>PSNR（Peak Signal to Noise Ratio，峰值信噪比）</li>
</ul>
<p>$MSE=\frac{1}{H * W}\sum_{i=1}^h\sum_{j=1}^w(X(i,j)-Y(i,j))^2$</p>
<p>$PSNR=10log_{10}(\frac{(2^n-1)^2}{MSE})$</p>
<p>MSE表示当前图像X和参考图像Y的均方误差（Mean Square Error），H、W分别为图像的高度和宽度；n为每像素的比特数，一般取8，即像素灰阶数为256. PSNR的单位是dB，数值越大表示失真越小。虽然PSNR和人眼的视觉特性并不完全一致，但是一般认为PSNR在38以上的时候，人眼就无法区分两幅图片了。</p>
<p>SSIM（structural similarity， 结构相似性），也是一种全参考的图像质量评价指标，它分别从亮度、对比度、结构三方面度量图像相似性。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdcef42unj30w00cqq4z.jpg" alt="image"></p>
<h2 id="SRCNN"><a href="#SRCNN" class="headerlink" title="SRCNN"></a>SRCNN</h2><ul>
<li>论文，<a href="http://101.96.10.63/personal.ie.cuhk.edu.hk/~ccloy/files/eccv_2014_deepresolution.pdf" target="_blank" rel="noopener">Learning a Deep Convolutional Network for Image Super-Resolution</a>, ECCV2014</li>
<li><a href="https://github.com/Edwardlzy/SRCNN" target="_blank" rel="noopener">代码</a></li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdbjr3uknj30u50jhaok.jpg" alt="image"></p>
<p>先使用双三次(bicubic)插值放大到目标大小，然后三层卷积做非线性映射，输出结果。三层卷积核大小分别为9*9，1*1，5*5，输出channel分别是64，32，3.</p>
<pre><code>SC is outperforms the sparse-coding-based method,是[Image Super-Resolution via Sparse Representation](http://101.96.10.64/www.columbia.edu/~jw2966/papers/YWHM10-TIP.pdf)这篇论文是黄煦涛和马毅小组的Jianchao Yang的作品。这篇论文提出的算法，在形式上和后文这些DL算法已经非常类似了，也是基于HR和LR配对的有监督训练。区别只在于这篇论文使用矩阵的稀疏表示来拟合SR函数，而DL算法使用神经网络拟合SR函数。前者是线性变换，而后者是非线性变换。
</code></pre><h2 id="FSRCNN"><a href="#FSRCNN" class="headerlink" title="FSRCNN"></a>FSRCNN</h2><ul>
<li>论文 <a href="https://arxiv.org/pdf/1608.00367.pdf" target="_blank" rel="noopener">Accelerating the Super-Resolution Convolutional Neural Network</a>,ECCV2016</li>
<li><a href="http://mmlab.ie.cuhk.edu.hk/projects/FSRCNN.html" target="_blank" rel="noopener">代码</a></li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdcu5mzwvj31400fttj8.jpg" alt="image"></p>
<p><strong>SRCNN加速版本，主要改进有三点</strong>：</p>
<ol>
<li>最后一层使用反卷积放大图片，不用bicubic</li>
<li>改变特征维数，使用更小的卷积核更多的卷积层</li>
<li>共享卷积层，放大不同的倍数只需改变反卷积层fine-tuning最后的反卷积层</li>
</ol>
<h2 id="FSPCN"><a href="#FSPCN" class="headerlink" title="FSPCN"></a>FSPCN</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1609.05158" target="_blank" rel="noopener">Real-Time Single Image and Video Super-Resolution Using an Efficient Sub-Pixel Convolutional Neural Network</a></li>
<li>代码</li>
</ul>
<ol>
<li><a href="https://github.com/drakelevy/ESPCN-TensorFlow" target="_blank" rel="noopener">tensorflow版本</a></li>
<li><a href="https://github.com/leftthomas/ESPCN" target="_blank" rel="noopener">pytorch版本</a></li>
<li><a href="https://github.com/wangxuewen99/Super-Resolution/tree/master/ESPCN" target="_blank" rel="noopener">caffe版本</a></li>
</ol>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdh9z295wj30tm093442.jpg" alt="image"></p>
<p>也是基于SRCNN,和FSRCNN不同的是在最后层不是反卷积来放大，而是使用多个通道融合，R^2个channel，每个feature map和原图大小一样，然后在R^2个channel相同位置合并成一个R*R的子区域，这样放大为 H*R X H*R</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdhf6sj2yj30sr0n2q7o.jpg" alt="image"><br><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdhgvl1ecj30vk05ndhm.jpg" alt="image"></p>
<h2 id="VDSR"><a href="#VDSR" class="headerlink" title="VDSR"></a>VDSR</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1511.04587" target="_blank" rel="noopener">Accurate Image Super-Resolution Using Very Deep Convolutional Networks</a></li>
<li>代码</li>
</ul>
<ol>
<li><a href="https://cv.snu.ac.kr/research/VDSR/" target="_blank" rel="noopener">code</a></li>
<li><a href="https://github.com/huangzehao/caffe-vdsr" target="_blank" rel="noopener">caffe</a></li>
<li><a href="https://github.com/Jongchan/tensorflow-vdsr" target="_blank" rel="noopener">tensorflow</a></li>
<li><a href="https://github.com/twtygqyy/pytorch-vdsr" target="_blank" rel="noopener">pytorch</a></li>
</ol>
<p>作者认为输入的低分辨率图像和输出的高分辨率图像在很大程度上是相似的，也就是指低分辨率图像携带的低频信息与高分辨率图像的低频信息相近，训练时带上这部分会多花费大量的时间，实际上我们只需要学习高分辨率图像和低分辨率图像之间的高频部分残差即可。残差网络结构的思想特别适合用来解决超分辨率问题，可以说影响了之后的深度学习超分辨率方法。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdhut5i63j30vy0hodpw.jpg" alt="image"></p>
<p><strong>改进个人认为有两点点</strong>：</p>
<ol>
<li>使用了ResNet的残差结构，使得网络可以比较深(20层)</li>
<li>将不同倍数的图像放到一起训练，使得鲁棒性能比较好</li>
</ol>
<p>文中使用了自适应梯度裁剪，使得训练收敛加快</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdhq6jlahj30oj0gcact.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdhxjziz9j30ls0l379l.jpg" alt="image"></p>
<p>看起来提升还是比较明显的,收敛速度提升也很明显</p>
<h2 id="DRCN"><a href="#DRCN" class="headerlink" title="DRCN"></a>DRCN</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1511.04491" target="_blank" rel="noopener">Deeply-Recursive Convolutional Network for Image Super-Resolution</a>, CVPR2016</li>
<li>代码<ol>
<li><a href="https://cv.snu.ac.kr/research/DRCN/" target="_blank" rel="noopener">code</a></li>
<li><a href="https://github.com/jiny2001/deeply-recursive-cnn-tf" target="_blank" rel="noopener">tensorflow</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdntn3chqj31160dmmzt.jpg" alt="image"></p>
<p>主要想法是RNN和Skip connection，原始图像插值输出后进入Embedding network，相当于提取特征，然后进入RNN，每一层都输出，最后合并输出。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdohzb91hj311o0q5wkp.jpg" alt="image"><br>可以看出Skip connection类似残差</p>
<h2 id="RED"><a href="#RED" class="headerlink" title="RED"></a>RED</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1606.08921" target="_blank" rel="noopener">Image Restoration Using Convolutional Auto-encoders with Symmetric Skip Connections</a>, NIPS2016</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdp28ykyzj312i0e0tei.jpg" alt="image"></p>
<p>分为encoder和decoder，感觉像Unet</p>
<h2 id="DRRN"><a href="#DRRN" class="headerlink" title="DRRN"></a>DRRN</h2><ul>
<li>论文<a href="http://openaccess.thecvf.com/content_cvpr_2017/papers/Tai_Image_Super-Resolution_via_CVPR_2017_paper.pdf" target="_blank" rel="noopener">Image Super-Resolution via Deep Recursive Residual Network</a>, CVPR2017</li>
<li>代码<ol>
<li><a href="tyshiwo/DRRN_CVPR17">caffe</a></li>
<li><a href="https://github.com/jt827859032/DRRN-pytorch" target="_blank" rel="noopener">pytorch</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxdphfkig7j31an0o37bk.jpg" alt="image"><br>这个是结合了之前的结构，感觉好像 Unet…</p>
<h2 id="LapSRN"><a href="#LapSRN" class="headerlink" title="LapSRN"></a>LapSRN</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1704.03915" target="_blank" rel="noopener">Deep Laplacian Pyramid Networks for Fast and Accurate Super-Resolution</a>, CVPR2017</li>
<li>代码<ol>
<li><a href="https://github.com/phoenix104104/LapSRN" target="_blank" rel="noopener">matconvnet</a></li>
<li><a href="https://github.com/twtygqyy/pytorch-LapSRN" target="_blank" rel="noopener">pytorch</a></li>
<li><a href="https://github.com/zjuela/LapSRN-tensorflow" target="_blank" rel="noopener">tensorflow</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfo2pofzrj30vt085tb2.jpg" alt="iamge"></p>
<p>本文的主要思想是一点一点的放大，不要一口吃成个胖子，可能撑死，细嚼慢咽。细数前面的集中方法，无论先放大，还是最后放大，都存在一个问题，就是一步到位。具体作者提出存在的三个问题：</p>
<ol>
<li>先上采样的存在计算开销浪费，反卷积和亚像素存在性能较差的问题</li>
<li>使用 l2 loss，导致预测模糊</li>
<li>一步到位的放大，对不同的放大倍数不能很好的适应</li>
</ol>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxemkkdqgdj31080e4q9n.jpg" alt="image"></p>
<p>LapSRN通过逐步上采样，一级一级预测残差的方式，在做高倍上采样时，也能得到中间低倍上采样结果的输出。由于尺寸是逐步放大，不是所有的操作都在大尺寸特征上进行，因此速度比较快。LapSRN设计了损失函数来训练网络，对每一级的结果都进行监督，因此取得了不错的结果。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfo4udc54j30rm0hpn0r.jpg" alt="iamge"><br><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfo903bhuj30qa0gpjup.jpg" alt="image"></p>
<h2 id="SRDenseNet"><a href="#SRDenseNet" class="headerlink" title="SRDenseNet"></a>SRDenseNet</h2><ul>
<li>论文<a href="http://openaccess.thecvf.com/content_ICCV_2017/papers/Tong_Image_Super-Resolution_Using_ICCV_2017_paper.pdf" target="_blank" rel="noopener">Image Super-Resolution Using Dense Skip Connections</a>, ICCV2017</li>
<li>代码<ol>
<li><a href="https://github.com/twtygqyy/pytorch-SRDenseNet" target="_blank" rel="noopener">pytorch_1</a></li>
<li><a href="https://github.com/wxywhu/SRDenseNet-pytorch" target="_blank" rel="noopener">pytorch_2</a></li>
<li><a href="https://github.com/ppooiiuuyh/SR_SRDenseNet_tensorflow" target="_blank" rel="noopener">tensorflow</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfojrj148j30uc0no45l.jpg" alt="image"></p>
<p>这个听名字看上图的模型可以看出来，这就是DenseNet版本的SR啊。作者在三种情况下做了对比，结果猜都可以猜出来</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfontf3tnj312y0820va.jpg" alt="image"></p>
<p>不同模型对比，不知道放大多少倍…</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfoowrh19j319o0arjvw.jpg" alt="image"></p>
<h2 id="SRGAN"><a href="#SRGAN" class="headerlink" title="SRGAN"></a>SRGAN</h2><ul>
<li>论文[Photo-Realistic Single Image Super-Resolution Using a Generative Adversarial Network], CVPR2017</li>
<li>代码<ol>
<li><a href="https://github.com/zsdonghao/SRGAN" target="_blank" rel="noopener">tensorflow_1</a></li>
<li><a href="https://github.com/buriburisuri/SRGAN" target="_blank" rel="noopener">tensorflow_2</a></li>
<li><a href="https://github.com/brade31919/SRGAN-tensorflow" target="_blank" rel="noopener">tensorflow_3</a></li>
<li><a href="https://github.com/junhocho/SRGAN" target="_blank" rel="noopener">torch</a></li>
<li><a href="https://github.com/ShenghaiRong/caffe_srgan" target="_blank" rel="noopener">caffe</a></li>
<li><a href="https://github.com/titu1994/Super-Resolution-using-Generative-Adversarial-Networks" target="_blank" rel="noopener">keras</a></li>
<li><a href="ai-tor/PyTorch-SRGAN">pytorch</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfp3is84nj30z30jxk66.jpg" alt="image"></p>
<p>利用GAN做SR,一个生成网络，一个测试网络。只是这里的Loss有点不一样，作者说使用普通的均方差loss虽然峰值信噪比不错，但是感官上并不好，作者了其它的loss，感官效果提升，但是细节有些会丢失。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfp2hn9xqj311a0hj1kx.jpg" alt="image"></p>
<h2 id="EDSR"><a href="#EDSR" class="headerlink" title="EDSR"></a>EDSR</h2><ul>
<li>论文<a href="https://arxiv.org/abs/1707.02921" target="_blank" rel="noopener">Enhanced Deep Residual Networks for Single Image Super-Resolution</a>, CVPRW2017</li>
<li>代码<ol>
<li><a href="https://github.com/LimBee/NTIRE2017" target="_blank" rel="noopener">torch</a></li>
<li><a href="https://github.com/jmiller656/EDSR-Tensorflow" target="_blank" rel="noopener">tensorflow</a></li>
<li><a href="https://github.com/thstkdgus35/EDSR-PyTorch" target="_blank" rel="noopener">pytorch</a></li>
</ol>
</li>
</ul>
<p>EDSR是NTIRE2017超分辨率挑战赛上获得冠军的方案。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfpi4e1sfj30h60e5wfy.jpg" alt="image"></p>
<p>作者认为在SR任务中使用Resnet结构的话，不需要使用BN层。作者文章中说，原始的ResNet最一开始是被提出来解决高层的计算机视觉问题，比如分类和检测，直接把ResNet的结构应用到像超分辨率这样的低层计算机视觉问题，显然不是最优的。去掉BN后，节省了内存资源。</p>
<ul>
<li>EDSR</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfploxg11j30i50eiabj.jpg" alt="image"></p>
<ul>
<li>MDSR</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfpn355hrj30ij0dejsq.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfppsa3syj314l0iun5b.jpg" alt="image"></p>
<h2 id="DBSR"><a href="#DBSR" class="headerlink" title="DBSR"></a>DBSR</h2><ul>
<li>论文<a href="https://arxiv.org/pdf/1803.02735.pdf" target="_blank" rel="noopener">Deep Back-Projection Networks For Super-Resolution</a>,CVPR2018</li>
<li>代码<ol>
<li><a href="https://github.com/alterzero/DBPN-Pytorch" target="_blank" rel="noopener">pytorch</a></li>
<li><a href="https://github.com/alterzero/DBPN-caffe" target="_blank" rel="noopener">caffe</a></li>
</ol>
</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfw9kdrkyj31a90kln8f.jpg" alt="image"></p>
<p>Winner (1st) of NTIRE2018 Competition (Track: x8 Bicubic Downsampling).从上图可以看出来是怎么搞得，不断的上采样，再卷积下采样，然后这样重复来回搞。想想参数应该不少。</p>
<p>作者把深度学习在超分辨率中分四种类型：</p>
<pre><code>1）Predefined upsampling：这种方法通常是先在网络之外将原始的LR（Low Resolution）的图像通过插值法扩大到MR级别的图像，再将MR图像输入网络。这种方法是深度学习方法在超分辨率领域的开山之作SRCNN所采用的，SRCNN先将图像插值扩大，在通过三个简单的卷积层将其映射到HR图像上。之后使用同样方法的网络通常是通过残差结构（VDSR、DRCN）或者递归结构（DRCN）来获得更好的非线性映射的。然而，这种方法有一个问题，就是有可能在插值过程中向图像中加入新的噪声。

2）Single upsampling：FSRCNN和ESPCN都属于这个类型，输入他们的都是原始的LR图像，通过非线性映射之后，在网络的最后再重组成为HR图像（FSRCNN是反卷积，ESPCN是亚像素卷积层）。这种方法在实践中非常的快，但是因为网络容量有限，这两个网络都不能学习到太过复杂的映射。NTIRE2017的冠军EDSR也是这样的方法，但是因为其参数过多，需要过长的训练时间，所以为后续实现更少参数的网络留下了空间。

3）Progressive upsampling：代表就是LapSRN，这种方法在一个前向传播的网络中逐步的放大图像的分辨率，我们可以将其简化成为是几个stack在一起的升采样网络，因为这种方法仅仅依赖于有限的低分辨率信息，所以很轻易的就被深度较浅的DBPN打败了。

4）Iterative up and downsampling：也就是这篇文章所提出的方法，作者关注在不同的深度提高SR的采样率，并且将重建的损失分布到各个阶段去，这种方法通过学习多个升降采样算子来使得网络能在生成更深的特征的时候保留更多的HR信息。
</code></pre><p>作者称以前的方法没有充分的学习到图片中的信息，这样来回上采样下采样可以充分学习。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwd6argij30ce05wt98.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwdguk61j30of0eq0w7.jpg" alt="image"></p>
<p>当让网络也用到了DenseNet的结构</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwehabgij315i0ek7b5.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwh4ihauj30s30fbgol.jpg" alt="image"></p>
<p>看来参数量还好</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwi3mtgrj30qh0dx75t.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwjcugvmj30rg0hhtp6.jpg" alt="image"></p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fxfwkem4y0j310c0lytif.jpg" alt="image"></p>
<p>看起来很厉害的样子</p>
<p><strong>参考</strong>:</p>
<ol>
<li><a href="https://antkillerfarm.github.io/dl/2017/10/18/Deep_Learning_21.html" target="_blank" rel="noopener">深度学习（二十一）——图像超分辨率, SRCNN, DRCN</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/31664818" target="_blank" rel="noopener">从SRCNN到EDSR，总结深度学习端到端超分辨率方法发展历程</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/39930043?utm_source=qq&amp;utm_medium=social&amp;utm_oi=814782158542630912" target="_blank" rel="noopener">NTIRE 2018 超分辨率 CVPR Workshop</a></li>
<li><a href="https://www.zhihu.com/question/268488873" target="_blank" rel="noopener">如何评价CVPR2018论文Deep Back-Projection Networks For SR？</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/34400207" target="_blank" rel="noopener">深度反向投影网络（DBPN）–通过Back-Projection来超分辨率的新方法</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/14/General-Language-Understanding-Evaluation-benchmark/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/14/General-Language-Understanding-Evaluation-benchmark/" class="post-title-link" itemprop="url">General_Language_Understanding_Evaluation_benchmark</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-14 10:50:42 / Modified: 11:12:18" itemprop="dateCreated datePublished" datetime="2018-11-14T10:50:42+08:00">2018-11-14</time>
            

            
              

              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>parpe:<a href="https://www.nyu.edu/projects/bowman/glue.pdf" target="_blank" rel="noopener">glue</a></p>
<p><a href="https://gluebenchmark.com/" target="_blank" rel="noopener">一个用于通用语言理解评估的基准，用来训练，预测和分析自然语言理解系统的资源整合</a></p>
<p>包括：</p>
<ul>
<li><p>基于现有数据集构建九个句子或句对语言理解任务的基准，并使用各种大小，不同难度，不同文本类型的数据集，</p>
</li>
<li><p>一种诊断数据集，旨在评估和分析自然语言中发现的各种语言现象的模型性能</p>
</li>
<li><p>用于跟踪基准测试性能的公共排行榜和用于可视化诊断集上模型性能</p>
</li>
</ul>
<p>GLUE基准与模型无关，因此任何能够处理句子和句子对并产生相应预测的系统都有资格参与。选择基准测试任务以便使用参数共享或其他传输学习技术来支持跨任务共享信息的模型。GLUE的最终目标是推动研究开发通用和强大的自然语言理解系统。</p>
<h2 id="11个任务"><a href="#11个任务" class="headerlink" title="11个任务"></a>11个任务</h2><p>可以看到包括情感分析，语义分析，相似度评价，问答，文本识别等常见NLP任务</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fx7ewxua0rj30va0jjq4e.jpg" alt=""></p>
<h2 id="Leaderboard"><a href="#Leaderboard" class="headerlink" title="Leaderboard"></a>Leaderboard</h2><p>看看排行榜，是不是好多熟悉身影，Bert稳居第一</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fx7eymjegpj316a0p577a.jpg" alt=""></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/14/Bert/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/14/Bert/" class="post-title-link" itemprop="url">Bert</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-14 10:36:38" itemprop="dateCreated datePublished" datetime="2018-11-14T10:36:38+08:00">2018-11-14</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-11-15 11:23:51" itemprop="dateModified" datetime="2018-11-15T11:23:51+08:00">2018-11-15</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>BERT is designed to pre-train deep bidirectional representations by jointly conditioning on both left and right context in all layers. As a result, the pre-trained BERT representations can be ﬁne-tuned with just one additional output layer to create state-of-theart models for a wide range of tasks。</strong></p>
<p><a href="https://arxiv.org/abs/1810.04805" target="_blank" rel="noopener">论文</a><br><a href="https://github.com/google-research/bert" target="_blank" rel="noopener">代码</a></p>
<p>它在11项自然语言处理任务中获得了最新的最新成果，包括将GLUE基准推至80.4％（绝对改进率7.6％），MultiNLI精度达到86.7％（绝对改进5.6％）和SQuAD v1.1问题回答测试F1到93.2（1.5绝对改进），超过人类表现2.0。</p>
<p>GLUE(<a href="https://gluebenchmark.com/" target="_blank" rel="noopener">通用语言理解评价标准</a>):80.4%</p>
<p>MultiNLI :86.7%</p>
<p>SQuAD:93.3%</p>
<h2 id="原来将语言表示应用于下游任务有两种策略"><a href="#原来将语言表示应用于下游任务有两种策略" class="headerlink" title="原来将语言表示应用于下游任务有两种策略"></a>原来将语言表示应用于下游任务有两种策略</h2><ol>
<li><p>feature-base</p>
<p> 如 ELMO,用于下游任务时，使用特定的结构，加上与训练好的representation作为补充的特征</p>
</li>
<li><p>fine-tuning</p>
<p> 如 GPT,用于下游任务通过fine_tuning模型</p>
</li>
</ol>
<p>但是他们都是单向的…</p>
<p>作者认为这种单向的结构限制了模型的表示能力，虽然OpenAI GPT使用了left-to-right的结构，但只能在self-attention层之前的token.这种方法对于sentencelevel 的任务还好，对于token-level任务可能就不那么好了。</p>
<p>BERT,1.使用双向编码器，2.使用了 masked languge model(MLM),3.还有句子预测任务(next sentence prediction)</p>
<h2 id="BERT-ELMO-GPT"><a href="#BERT-ELMO-GPT" class="headerlink" title="BERT\ELMO\GPT"></a>BERT\ELMO\GPT</h2><p>一张图看出区别，可以看出只有BERT依赖于左右上下文<br><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fx8kiusx84j31y00g7qfc.jpg" alt=""></p>
<p>模型架构使用了tensor2tensor,有大小两种模型。</p>
<p>这里输入比较有想法，token embedding + segment embedding + position embedding,这样可以用在不同任务<br><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fx8kqyirisj31pq0i6aji.jpg" alt=""></p>
<p>与训练任务</p>
<ol>
<li>完形填空(Masked)</li>
<li>下一句话预测</li>
</ol>
<p>实验结果看[论文]</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/11/11/hello-world/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/11/11/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-11-11 14:08:41" itemprop="dateCreated datePublished" datetime="2018-11-11T14:08:41+08:00">2018-11-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-24 15:51:24" itemprop="dateModified" datetime="2019-01-24T15:51:24+08:00">2019-01-24</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/11/linux查看系统信息/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/11/linux查看系统信息/" class="post-title-link" itemprop="url">linux查看系统信息</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-11 15:52:19" itemprop="dateCreated datePublished" datetime="2018-09-11T15:52:19+08:00">2018-09-11</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-11-11 14:33:19" itemprop="dateModified" datetime="2018-11-11T14:33:19+08:00">2018-11-11</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>linux系统常用查看系统信息命令</p>
<h2 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"># uname -a # 查看内核/操作系统/CPU信息</span><br><span class="line"></span><br><span class="line"># head -n 1 /etc/issue # 查看操作系统版本</span><br><span class="line"></span><br><span class="line"># cat /proc/cpuinfo # 查看CPU信息</span><br><span class="line"></span><br><span class="line"># hostname # 查看计算机名</span><br><span class="line"></span><br><span class="line"># lspci -tv # 列出所有PCI设备</span><br><span class="line"></span><br><span class="line"># lsusb -tv # 列出所有USB设备</span><br><span class="line"></span><br><span class="line"># lsmod # 列出加载的内核模块</span><br><span class="line"></span><br><span class="line"># env # 查看环境变量资源</span><br><span class="line"></span><br><span class="line"># free -m # 查看内存使用量和交换区使用量</span><br><span class="line"></span><br><span class="line"># df -h # 查看各分区使用情况</span><br><span class="line"></span><br><span class="line"># du -sh &lt;目录名&gt; # 查看指定目录的大小</span><br><span class="line"></span><br><span class="line"># grep MemTotal /proc/meminfo # 查看内存总量</span><br><span class="line"></span><br><span class="line"># grep MemFree /proc/meminfo # 查看空闲内存量</span><br><span class="line"></span><br><span class="line"># uptime # 查看系统运行时间、用户数、负载</span><br><span class="line"></span><br><span class="line"># cat /proc/loadavg # 查看系统负载磁盘和分区</span><br><span class="line"></span><br><span class="line"># mount | column -t # 查看挂接的分区状态</span><br><span class="line"></span><br><span class="line"># fdisk -l # 查看所有分区</span><br><span class="line"></span><br><span class="line"># swapon -s # 查看所有交换分区</span><br><span class="line"></span><br><span class="line"># hdparm -i /dev/hda # 查看磁盘参数(仅适用于IDE设备)</span><br><span class="line"></span><br><span class="line"># dmesg | grep IDE # 查看启动时IDE设备检测状况网络</span><br><span class="line"></span><br><span class="line"># ifconfig # 查看所有网络接口的属性</span><br><span class="line"></span><br><span class="line"># iptables -L # 查看防火墙设置</span><br><span class="line"></span><br><span class="line"># route -n # 查看路由表</span><br><span class="line"></span><br><span class="line"># netstat -lntp # 查看所有监听端口</span><br><span class="line"></span><br><span class="line"># netstat -antp # 查看所有已经建立的连接</span><br><span class="line"></span><br><span class="line"># netstat -s # 查看网络统计信息进程</span><br><span class="line"></span><br><span class="line"># ps -ef # 查看所有进程</span><br><span class="line"></span><br><span class="line"># top # 实时显示进程状态用户</span><br><span class="line"></span><br><span class="line"># w # 查看活动用户</span><br><span class="line"></span><br><span class="line"># id &lt;用户名&gt; # 查看指定用户信息</span><br><span class="line"></span><br><span class="line"># last # 查看用户登录日志</span><br><span class="line"></span><br><span class="line"># cut -d: -f1 /etc/passwd # 查看系统所有用户</span><br><span class="line"></span><br><span class="line"># cut -d: -f1 /etc/group # 查看系统所有组</span><br><span class="line"></span><br><span class="line"># crontab -l # 查看当前用户的计划任务服务</span><br><span class="line"></span><br><span class="line"># chkconfig –list # 列出所有系统服务</span><br><span class="line"></span><br><span class="line"># chkconfig –list | grep on # 列出所有启动的系统服务程序</span><br><span class="line"></span><br><span class="line"># rpm -qa # 查看所有安装的软件包</span><br></pre></td></tr></table></figure>
<h2 id="系统"><a href="#系统" class="headerlink" title="系统"></a>系统</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># uname -a # 查看内核/操作系统/CPU信息</span><br><span class="line"># head -n 1 /etc/issue # 查看操作系统版本</span><br><span class="line"># cat /proc/cpuinfo # 查看CPU信息</span><br><span class="line"># hostname # 查看计算机名</span><br><span class="line"># lspci -tv # 列出所有PCI设备</span><br><span class="line"># lsusb -tv # 列出所有USB设备</span><br><span class="line"># lsmod # 列出加载的内核模块</span><br><span class="line"># env # 查看环境变量</span><br></pre></td></tr></table></figure>
<h2 id="资源"><a href="#资源" class="headerlink" title="资源"></a>资源</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># free -m # 查看内存使用量和交换区使用量</span><br><span class="line"># df -h # 查看各分区使用情况</span><br><span class="line"># du -sh &lt;目录名&gt; # 查看指定目录的大小</span><br><span class="line"># grep MemTotal /proc/meminfo # 查看内存总量</span><br><span class="line"># grep MemFree /proc/meminfo # 查看空闲内存量</span><br><span class="line"># uptime # 查看系统运行时间、用户数、负载</span><br><span class="line"># cat /proc/loadavg # 查看系统负载</span><br></pre></td></tr></table></figure>
<h2 id="磁盘和分区"><a href="#磁盘和分区" class="headerlink" title="磁盘和分区"></a>磁盘和分区</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># mount | column -t # 查看挂接的分区状态</span><br><span class="line"># fdisk -l # 查看所有分区</span><br><span class="line"># swapon -s # 查看所有交换分区</span><br><span class="line"># hdparm -i /dev/hda # 查看磁盘参数(仅适用于IDE设备)</span><br><span class="line"># dmesg | grep IDE # 查看启动时IDE设备检测状况</span><br></pre></td></tr></table></figure>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># ifconfig # 查看所有网络接口的属性</span><br><span class="line"># iptables -L # 查看防火墙设置</span><br><span class="line"># route -n # 查看路由表</span><br><span class="line"># netstat -lntp # 查看所有监听端口</span><br><span class="line"># netstat -antp # 查看所有已经建立的连接</span><br><span class="line"># netstat -s # 查看网络统计信息</span><br></pre></td></tr></table></figure>
<h2 id="进程"><a href="#进程" class="headerlink" title="进程"></a>进程</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># ps -ef # 查看所有进程</span><br><span class="line"># top # 实时显示进程状态</span><br></pre></td></tr></table></figure>
<h2 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># w # 查看活动用户</span><br><span class="line"># id &lt;用户名&gt; # 查看指定用户信息</span><br><span class="line"># last # 查看用户登录日志</span><br><span class="line"># cut -d: -f1 /etc/passwd # 查看系统所有用户</span><br><span class="line"># cut -d: -f1 /etc/group # 查看系统所有组</span><br><span class="line"># crontab -l # 查看当前用户的计划任务</span><br></pre></td></tr></table></figure>
<h2 id="服务"><a href="#服务" class="headerlink" title="服务"></a>服务</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># chkconfig --list # 列出所有系统服务</span><br><span class="line"># chkconfig --list | grep on # 列出所有启动的系统服务</span><br></pre></td></tr></table></figure>
<h2 id="程序"><a href="#程序" class="headerlink" title="程序"></a>程序</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># rpm -qa # 查看所有安装的软件包</span><br></pre></td></tr></table></figure>
<h2 id="查看Linux内核版本命令（两种方法）："><a href="#查看Linux内核版本命令（两种方法）：" class="headerlink" title="查看Linux内核版本命令（两种方法）："></a>查看Linux内核版本命令（两种方法）：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、cat /proc/version</span><br><span class="line">[root@localhost ~]# cat /proc/version</span><br><span class="line">Linux version 2.6.18-194.8.1.el5.centos.plus</span><br><span class="line">(mockbuild@builder17.centos.org) (gcc version 4.1.220080704</span><br><span class="line">(Red Hat 4.1.2-48)) #1 SMP Wed Jul 7 11:50:45 EDT 2010</span><br><span class="line">2、uname -a</span><br><span class="line">[root@localhost ~]# uname -a</span><br><span class="line">Linux localhost.localdomain 2.6.18-194.8.1.el5.centos.plus </span><br><span class="line">#1 SMP Wed Jul 7 11:50:45 EDT 2010 i686 i686 i386 GNU/Linux</span><br></pre></td></tr></table></figure>
<h2 id="查看Linux系统版本的命令（3种方法）"><a href="#查看Linux系统版本的命令（3种方法）" class="headerlink" title="查看Linux系统版本的命令（3种方法）:"></a>查看Linux系统版本的命令（3种方法）:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1、lsb_release -a，即可列出所有版本信息：</span><br><span class="line">[root@localhost ~]# lsb_release -a</span><br><span class="line">LSB Version: :core-3.1-ia32:core-3.1-noarch:graphics-3.1-ia32:graphics-3.1-noarch</span><br><span class="line">Distributor ID: CentOS</span><br><span class="line">Description: CentOS release 6.5 (Final)</span><br><span class="line">Release: 6.5</span><br><span class="line">Codename: Final</span><br><span class="line">这个命令适用于所有的Linux发行版，包括Redhat、SuSE、Debian…等发行版。</span><br><span class="line">2、cat /etc/redhat-release，这种方法只适合Redhat系的Linux：</span><br><span class="line">[root@localhost ~]# cat /etc/redhat-release</span><br><span class="line">CentOS release 6.7 (Final)</span><br><span class="line">3、cat /etc/issue，此命令也适用于所有的Linux发行版。</span><br><span class="line">[root@localhost ~]# cat /etc/issue</span><br><span class="line">CentOS release 6.7 (Final)</span><br><span class="line">Kernel \r on an \m</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/04/Cmake/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/04/Cmake/" class="post-title-link" itemprop="url">CMake</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-04 19:17:00" itemprop="dateCreated datePublished" datetime="2018-09-04T19:17:00+08:00">2018-09-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-16 10:18:14" itemprop="dateModified" datetime="2018-10-16T10:18:14+08:00">2018-10-16</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h2 id="什么是-CMake"><a href="#什么是-CMake" class="headerlink" title="什么是 CMake"></a>什么是 CMake</h2><p>All problems in computer science can be solved by another level of indirection.</p>
<p>David Wheeler</p>
<p>你或许听过好几种 Make 工具，例如 GNU Make ，QT 的 qmake ，微软的 MS nmake，BSD Make（pmake），Makepp，等等。这些 Make 工具遵循着不同的规范和标准，所执行的 Makefile 格式也千差万别。这样就带来了一个严峻的问题：如果软件想跨平台，必须要保证能够在不同平台编译。而如果使用上面的 Make 工具，就得为每一种标准写一次 Makefile ，这将是一件让人抓狂的工作。</p>
<p>CMake就是针对上面问题所设计的工具：它首先允许开发者编写一种平台无关的==CMakeList.txt==文件来定制整个编译流程，然后再根据目标用户的平台进一步生成所需的本地化 Makefile 和工程文件，如 Unix 的 Makefile或Windows的Visual_Studio 工程。从而做到“Write once, run everywhere”。显然，CMake 是一个比上述几种 make 更高级的编译配置工具。一些使用 CMake 作为项目架构系统的知名开源项目有 VTK、ITK、KDE、OpenCV、OSG 等 [1]。</p>
<h3 id="在-linux-平台下使用-CMake-生成-Makefile-并编译的流程如下："><a href="#在-linux-平台下使用-CMake-生成-Makefile-并编译的流程如下：" class="headerlink" title="在 linux 平台下使用 CMake 生成 Makefile 并编译的流程如下："></a>在 linux 平台下使用 CMake 生成 Makefile 并编译的流程如下：</h3><ul>
<li>编写 CMake 配置文件 CMakeLists.txt 。</li>
<li>执行命令 cmake PATH 或者 ccmake PATH 生成 Makefile 11ccmake 和 cmake 的区别在于前者提供了一个交互式的界面。 。其中， PATH 是 CMakeLists.txt 所在的目录。</li>
<li>使用 make 命令进行编译</li>
</ul>
<h2 id="入门案例：单个源文件"><a href="#入门案例：单个源文件" class="headerlink" title="入门案例：单个源文件"></a>入门案例：单个源文件</h2><p>对于简单的项目，只需要写几行代码就可以了。例如，假设现在我们的项目中只有一个源文件 main.cc ，该程序的用途是计算一个数的指数幂。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;stdio.h&gt;</span><br><span class="line">#include &lt;stdlib.h&gt;</span><br><span class="line">/**</span><br><span class="line"> * power - Calculate the power of number.</span><br><span class="line"> * @param base: Base value.</span><br><span class="line"> * @param exponent: Exponent value.</span><br><span class="line"> *</span><br><span class="line"> * @return base raised to the power exponent.</span><br><span class="line"> */</span><br><span class="line">double power(double base, int exponent)</span><br><span class="line">&#123;</span><br><span class="line">    int result = base;</span><br><span class="line">    int i;</span><br><span class="line">    </span><br><span class="line">    if (exponent == 0) &#123;</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    for(i = 1; i &lt; exponent; ++i)&#123;</span><br><span class="line">        result = result * base;</span><br><span class="line">    &#125;</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    if (argc &lt; 3)&#123;</span><br><span class="line">        printf(&quot;Usage: %s base exponent \n&quot;, argv[0]);</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    double base = atof(argv[1]);</span><br><span class="line">    int exponent = atoi(argv[2]);</span><br><span class="line">    double result = power(base, exponent);</span><br><span class="line">    printf(&quot;%g ^ %d is %g\n&quot;, base, exponent, result);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="编写-CMakeLists-txt"><a href="#编写-CMakeLists-txt" class="headerlink" title="编写 CMakeLists.txt"></a>编写 CMakeLists.txt</h3><p>首先编写 CMakeLists.txt 文件，并保存在与 main.cc 源文件同个目录下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"># 项目信息</span><br><span class="line">project (Demo1)</span><br><span class="line"># 指定生成目标</span><br><span class="line">add_executable(Demo main.cc)</span><br></pre></td></tr></table></figure></p>
<p>CMakeLists.txt 的语法比较简单，由命令、注释和空格组成，其中命令是不区分大小写的。符号 # 后面的内容被认为是注释。命令由命令名称、小括号和参数组成，参数之间使用空格进行间隔。</p>
<p>对于上面的 CMakeLists.txt 文件，依次出现了几个命令：<br>cmake_minimum_required：指定运行此配置文件所需的 CMake 的最低版本；<br>project：参数值是 Demo1，该命令表示项目的名称是 Demo1 。<br>add_executable： 将名为 main.cc 的源文件编译成一个名称为 Demo 的可执行文件。<br>编译项目</p>
<p>之后，在当前目录执行 cmake . ，得到 Makefile 后再使用 make 命令编译得到 Demo1 可执行文件。</p>
<h2 id="多个源文件"><a href="#多个源文件" class="headerlink" title="多个源文件"></a>多个源文件</h2><p>同一目录，多个源文件</p>
<p>上面的例子只有单个源文件。现在假如把 power 函数单独写进一个名为 MathFunctions.c 的源文件里，使得这个工程变成如下的形式：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">./Demo2</span><br><span class="line">    |</span><br><span class="line">    +--- main.cc</span><br><span class="line">    |</span><br><span class="line">    +--- MathFunctions.cc</span><br><span class="line">    |</span><br><span class="line">    +--- MathFunctions.h</span><br></pre></td></tr></table></figure></p>
<h3 id="CMakeLists-txt"><a href="#CMakeLists-txt" class="headerlink" title="CMakeLists.txt"></a>CMakeLists.txt</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"># 项目信息</span><br><span class="line">project (Demo2)</span><br><span class="line"># 指定生成目标</span><br><span class="line">add_executable(Demo main.cc MathFunctions.cc)</span><br></pre></td></tr></table></figure>
<p>更省事的方法是使用 aux_source_directory命令，该命令会查找指定目录下的所有源文件，然后将结果存进指定变量名。其语法如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">aux_source_directory(&lt;dir&gt; &lt;variable&gt;)</span><br></pre></td></tr></table></figure></p>
<p>可以修改 CMakeLists.txt 如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"># 项目信息</span><br><span class="line">project (Demo2)</span><br><span class="line"># 查找当前目录下的所有源文件</span><br><span class="line"># 并将名称保存到 DIR_SRCS 变量</span><br><span class="line">aux_source_directory(. DIR_SRCS)</span><br><span class="line"># 指定生成目标</span><br><span class="line">add_executable(Demo $&#123;DIR_SRCS&#125;)</span><br></pre></td></tr></table></figure></p>
<p>这样，CMake 会将当前目录所有源文件的文件名赋值给变量 DIR_SRCS ，再指示变量 DIR_SRCS 中的源文件需要编译成一个名称为 Demo 的可执行文件。</p>
<h2 id="多个目录，多个源文件"><a href="#多个目录，多个源文件" class="headerlink" title="多个目录，多个源文件"></a>多个目录，多个源文件</h2><p>现在进一步将 MathFunctions.h 和 MathFunctions.cc 文件移动到 math 目录下。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">./Demo3</span><br><span class="line">    |</span><br><span class="line">    +--- main.cc</span><br><span class="line">    |</span><br><span class="line">    +--- math/</span><br><span class="line">          |</span><br><span class="line">          +--- MathFunctions.cc</span><br><span class="line">          |</span><br><span class="line">          +--- MathFunctions.h</span><br></pre></td></tr></table></figure></p>
<p>对于这种情况，需要分别在项目根目录 Demo3 和 math 目录里各编写一个 CMakeLists.txt 文件。为了方便，我们可以先将 math 目录里的文件编译成静态库再由 main 函数调用。</p>
<h3 id="根目录中的-CMakeLists-txt-："><a href="#根目录中的-CMakeLists-txt-：" class="headerlink" title="根目录中的 CMakeLists.txt ："></a>根目录中的 CMakeLists.txt ：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"># 项目信息</span><br><span class="line">project (Demo3)</span><br><span class="line"># 查找当前目录下的所有源文件</span><br><span class="line"># 并将名称保存到 DIR_SRCS 变量</span><br><span class="line">aux_source_directory(. DIR_SRCS)</span><br><span class="line"># 添加 math 子目录</span><br><span class="line">add_subdirectory(math)</span><br><span class="line"># 指定生成目标 </span><br><span class="line">add_executable(Demo main.cc)</span><br><span class="line"># 添加链接库</span><br><span class="line">target_link_libraries(Demo MathFunctions)</span><br></pre></td></tr></table></figure>
<p>该文件添加了下面的内容: 第3行，使用命令 add_subdirectory 指明本项目包含一个子目录 math，这样 math 目录下的 CMakeLists.txt 文件和源代码也会被处理 。第6行，使用命令 target_link_libraries 指明可执行文件 main 需要连接一个名为 MathFunctions 的链接库 。</p>
<h3 id="子目录中的-CMakeLists-txt："><a href="#子目录中的-CMakeLists-txt：" class="headerlink" title="子目录中的 CMakeLists.txt："></a>子目录中的 CMakeLists.txt：</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 查找当前目录下的所有源文件</span><br><span class="line"># 并将名称保存到 DIR_LIB_SRCS 变量</span><br><span class="line">aux_source_directory(. DIR_LIB_SRCS)</span><br><span class="line"># 生成链接库</span><br><span class="line">add_library (MathFunctions $&#123;DIR_LIB_SRCS&#125;)</span><br></pre></td></tr></table></figure>
<p>在该文件中使用命令 add_library 将 src 目录中的源文件编译为静态链接库。</p>
<h2 id="自定义编译选项"><a href="#自定义编译选项" class="headerlink" title="自定义编译选项"></a>自定义编译选项</h2><p>CMake 允许为项目增加编译选项，从而可以根据用户的环境和需求选择最合适的编译方案。</p>
<p>例如，可以将 MathFunctions 库设为一个可选的库，如果该选项为 ON ，就使用该库定义的数学函数来进行运算。否则就调用标准库中的数学函数库。</p>
<h3 id="CMakeLists-文件"><a href="#CMakeLists-文件" class="headerlink" title="CMakeLists 文件"></a>CMakeLists 文件</h3><p>我们要做的第一步是在顶层的 CMakeLists.txt 文件中添加该选项：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># CMake 最低版本号要求</span><br><span class="line">cmake_minimum_required (VERSION 2.8)</span><br><span class="line"># 项目信息</span><br><span class="line">project (Demo4)</span><br><span class="line"># 加入一个配置头文件，用于处理 CMake 对源码的设置</span><br><span class="line">configure_file (</span><br><span class="line">  &quot;$&#123;PROJECT_SOURCE_DIR&#125;/config.h.in&quot;</span><br><span class="line">  &quot;$&#123;PROJECT_BINARY_DIR&#125;/config.h&quot;</span><br><span class="line">  )</span><br><span class="line"># 是否使用自己的 MathFunctions 库</span><br><span class="line">option (USE_MYMATH</span><br><span class="line">       &quot;Use provided math implementation&quot; ON)</span><br><span class="line"># 是否加入 MathFunctions 库</span><br><span class="line">if (USE_MYMATH)</span><br><span class="line">  include_directories (&quot;$&#123;PROJECT_SOURCE_DIR&#125;/math&quot;)</span><br><span class="line">  add_subdirectory (math)  </span><br><span class="line">  set (EXTRA_LIBS $&#123;EXTRA_LIBS&#125; MathFunctions)</span><br><span class="line">endif (USE_MYMATH)</span><br><span class="line"># 查找当前目录下的所有源文件</span><br><span class="line"># 并将名称保存到 DIR_SRCS 变量</span><br><span class="line">aux_source_directory(. DIR_SRCS)</span><br><span class="line"># 指定生成目标</span><br><span class="line">add_executable(Demo $&#123;DIR_SRCS&#125;)</span><br><span class="line">target_link_libraries (Demo  $&#123;EXTRA_LIBS&#125;)</span><br></pre></td></tr></table></figure></p>
<p>其中：<br>第7行的 configure_file 命令用于加入一个配置头文件 config.h ，这个文件由 CMake 从 config.h.in 生成，通过这样的机制，将可以通过预定义一些参数和变量来控制代码的生成。<br>第13行的 option 命令添加了一个 USE_MYMATH 选项，并且默认值为 ON 。<br>第17行根据 USE_MYMATH 变量的值来决定是否使用我们自己编写的 MathFunctions 库。<br>修改 main.cc 文件</p>
<p>之后修改 main.cc 文件，让其根据 USE_MYMATH 的预定义值来决定是否调用标准库还是 MathFunctions 库：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#include </span><br><span class="line">#include </span><br><span class="line">#include &quot;config.h&quot;</span><br><span class="line">#ifdef USE_MYMATH</span><br><span class="line">  #include &quot;math/MathFunctions.h&quot;</span><br><span class="line">#else</span><br><span class="line">  #include </span><br><span class="line">#endif</span><br><span class="line">int main(int argc, char *argv[])</span><br><span class="line">&#123;</span><br><span class="line">    if (argc &lt; 3)&#123;</span><br><span class="line">        printf(&quot;Usage: %s base exponent \n&quot;, argv[0]);</span><br><span class="line">        return 1;</span><br><span class="line">    &#125;</span><br><span class="line">    double base = atof(argv[1]);</span><br><span class="line">    int exponent = atoi(argv[2]);</span><br><span class="line">    </span><br><span class="line">#ifdef USE_MYMATH</span><br><span class="line">    printf(&quot;Now we use our own Math library. \n&quot;);</span><br><span class="line">    double result = power(base, exponent);</span><br><span class="line">#else</span><br><span class="line">    printf(&quot;Now we use the standard library. \n&quot;);</span><br><span class="line">    double result = pow(base, exponent);</span><br><span class="line">#endif</span><br><span class="line">    printf(&quot;%g ^ %d is %g\n&quot;, base, exponent, result);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="编写-config-h-in-文件"><a href="#编写-config-h-in-文件" class="headerlink" title="编写 config.h.in 文件"></a>编写 config.h.in 文件</h3><p>上面的程序值得注意的是第2行，这里引用了一个 config.h 文件，这个文件预定义了 USE_MYMATH 的值。但我们并不直接编写这个文件，为了方便从 CMakeLists.txt 中导入配置，我们编写一个 config.h.in 文件，内容如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#cmakedefine USE_MYMATH</span><br></pre></td></tr></table></figure></p>
<p>这样 CMake 会自动根据 CMakeLists 配置文件中的设置自动生成 config.h 文件。</p>
<h3 id="编译项目"><a href="#编译项目" class="headerlink" title="编译项目"></a>编译项目</h3><p>现在编译一下这个项目，为了便于交互式的选择该变量的值，可以使用 ccmake 命令 22也可以使用 cmake -i 命令，该命令会提供一个会话式的交互式配置界面。 ：</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fuxqwvi9u8j30np0dp789.jpg" alt=""></p>
<p>从中可以找到刚刚定义的 USE_MYMATH 选项，按键盘的方向键可以在不同的选项窗口间跳转，按下 enter 键可以修改该选项。修改完成后可以按下 c 选项完成配置，之后再按 g 键确认生成 Makefile 。ccmake 的其他操作可以参考窗口下方给出的指令提示。</p>
<p>我们可以试试分别将 USE_MYMATH 设为 ON 和 OFF 得到的结果：</p>
<p>USE_MYMATH 为 ON</p>
<p>运行结果：<br>12345 [ehome@xman Demo4]$ ./DemoNow we use our own MathFunctions library.  7 ^ 3 = 343.000000 10 ^ 5 = 100000.000000 2 ^ 10 = 1024.000000<br>此时 config.h 的内容为：<br>1 #define USE_MYMATH<br>USE_MYMATH 为 OFF</p>
<p>运行结果：<br>12345 [ehome@xman Demo4]$ ./DemoNow we use the standard library.  7 ^ 3 = 343.000000 10 ^ 5 = 100000.000000 2 ^ 10 = 1024.000000<br>此时 config.h 的内容为：<br>1 /<em> #undef USE_MYMATH </em>/</p>
<h2 id="安装和测试"><a href="#安装和测试" class="headerlink" title="安装和测试"></a>安装和测试</h2><p>CMake 也可以指定安装规则，以及添加测试。这两个功能分别可以通过在产生 Makefile 后使用 make install 和 make test 来执行。在以前的 GNU Makefile 里，你可能需要为此编写 install 和 test 两个伪目标和相应的规则，但在 CMake 里，这样的工作同样只需要简单的调用几条命令。</p>
<h3 id="定制安装规则"><a href="#定制安装规则" class="headerlink" title="定制安装规则"></a>定制安装规则</h3><p>首先先在 math/CMakeLists.txt 文件里添加下面两行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 指定 MathFunctions 库的安装路径</span><br><span class="line">install (TARGETS MathFunctions DESTINATION bin)</span><br><span class="line">install (FILES MathFunctions.h DESTINATION include)</span><br></pre></td></tr></table></figure></p>
<p>指明 MathFunctions 库的安装路径。之后同样修改根目录的 CMakeLists 文件，在末尾添加下面几行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 指定安装路径install (TARGETS Demo DESTINATION bin)</span><br><span class="line">install (FILES &quot;$&#123;PROJECT_BINARY_DIR&#125;/config.h&quot;         DESTINATION include)</span><br></pre></td></tr></table></figure></p>
<p>通过上面的定制，生成的 Demo 文件和 MathFunctions 函数库 libMathFunctions.o 文件将会被复制到 /usr/local/bin 中，而 MathFunctions.h 和生成的 config.h 文件则会被复制到 /usr/local/include 中。我们可以验证一下33顺带一提的是，这里的 /usr/local/ 是默认安装到的根目录，可以通过修改 CMAKE_INSTALL_PREFIX 变量的值来指定这些文件应该拷贝到哪个根目录。：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo5]$ sudo make install</span><br><span class="line">[ 50%] Built target MathFunctions</span><br><span class="line">[100%] Built target Demo</span><br><span class="line">Install the project...</span><br><span class="line">-- Install configuration: &quot;&quot;</span><br><span class="line">-- Installing: /usr/local/bin/Demo</span><br><span class="line">-- Installing: /usr/local/include/config.h</span><br><span class="line">-- Installing: /usr/local/bin/libMathFunctions.a</span><br><span class="line">-- Up-to-date: /usr/local/include/MathFunctions.h</span><br><span class="line">[ehome@xman Demo5]$ ls /usr/local/bin</span><br><span class="line">Demo  libMathFunctions.a</span><br><span class="line">[ehome@xman Demo5]$ ls /usr/local/include</span><br><span class="line">config.h  MathFunctions.h</span><br></pre></td></tr></table></figure></p>
<h3 id="为工程添加测试"><a href="#为工程添加测试" class="headerlink" title="为工程添加测试"></a>为工程添加测试</h3><p>添加测试同样很简单。CMake 提供了一个称为 CTest 的测试工具。我们要做的只是在项目根目录的 CMakeLists 文件中调用一系列的 add_test 命令。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 启用测试</span><br><span class="line">enable_testing()</span><br><span class="line"># 测试程序是否成功运行</span><br><span class="line">add_test (test_run Demo 5 2)</span><br><span class="line"># 测试帮助信息是否可以正常提示</span><br><span class="line">add_test (test_usage Demo)</span><br><span class="line">set_tests_properties (test_usage</span><br><span class="line">  PROPERTIES PASS_REGULAR_EXPRESSION &quot;Usage: .* base exponent&quot;)</span><br><span class="line"># 测试 5 的平方</span><br><span class="line">add_test (test_5_2 Demo 5 2)</span><br><span class="line">set_tests_properties (test_5_2</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION &quot;is 25&quot;)</span><br><span class="line"># 测试 10 的 5 次方</span><br><span class="line">add_test (test_10_5 Demo 10 5)</span><br><span class="line">set_tests_properties (test_10_5</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION &quot;is 100000&quot;)</span><br><span class="line"># 测试 2 的 10 次方</span><br><span class="line">add_test (test_2_10 Demo 2 10)</span><br><span class="line">set_tests_properties (test_2_10</span><br><span class="line"> PROPERTIES PASS_REGULAR_EXPRESSION &quot;is 1024&quot;)</span><br></pre></td></tr></table></figure></p>
<p>用来测试输出是否包含后面跟着的字符串。</p>
<p>让我们看看测试的结果：<br>123456789101112131415 [ehome@xman Demo5]$ make testRunning tests…Test project /home/ehome/Documents/programming/C/power/Demo5    Start 1: test_run1/4 Test #1: test_run …………………….   Passed    0.00 sec    Start 2: test_5_22/4 Test #2: test_5_2 …………………….   Passed    0.00 sec    Start 3: test_10_53/4 Test #3: test_10_5 ……………………   Passed    0.00 sec    Start 4: test_2_104/4 Test #4: test_2_10 ……………………   Passed    0.00 sec100% tests passed, 0 tests failed out of 4Total Test time (real) =   0.01 sec<br>如果要测试更多的输入数据，像上面那样一个个写测试用例未免太繁琐。这时可以通过编写宏来实现：<br>1234567891011 # 定义一个宏，用来简化测试工作macro (do_test arg1 arg2 result)add_test (test_${arg1}_${arg2} Demo ${arg1}${arg2})set_tests_properties (test_${arg1}_${arg2}    PROPERTIES PASS_REGULAR_EXPRESSION ${result})endmacro (do_test)# 使用该宏进行一系列的数据测试do_test (52”is 25”)do_test (105”is 100000”)do_test (210”is 1024”)<br>关于 CTest 的更详细的用法可以通过 man 1 ctest 参考 CTest 的文档。</p>
<h2 id="支持-gdb"><a href="#支持-gdb" class="headerlink" title="支持 gdb"></a>支持 gdb</h2><p>让 CMake 支持 gdb 的设置也很容易，只需要指定 Debug 模式下开启 -g 选项：<br>123 set(CMAKE_BUILD_TYPE “Debug”)set(CMAKE_CXX_FLAGS_DEBUG “$ENV{CXXFLAGS} -O0 -Wall -g -ggdb”)set(CMAKE_CXX_FLAGS_RELEASE “$ENV{CXXFLAGS} -O3 -Wall”)<br>之后可以直接对生成的程序使用 gdb 来调试。</p>
<p>添加环境检查</p>
<p>本节对应的源代码所在目录：Demo6。</p>
<p>有时候可能要对系统环境做点检查，例如要使用一个平台相关的特性的时候。在这个例子中，我们检查系统是否自带 pow 函数。如果带有 pow 函数，就使用它；否则使用我们定义的 power 函数。</p>
<p>添加 CheckFunctionExists 宏</p>
<p>首先在顶层 CMakeLists 文件中添加 CheckFunctionExists.cmake 宏，并调用 check_function_exists 命令测试链接器是否能够在链接阶段找到 pow 函数。<br>123 # 检查系统是否支持 pow 函数include (${CMAKE_ROOT}/Modules/CheckFunctionExists.cmake)check_function_exists (pow HAVE_POW)<br>将上面这段代码放在 configure_file 命令前。</p>
<p>预定义相关宏变量</p>
<p>接下来修改 config.h.in 文件，预定义相关的宏变量。<br>12 // does the platform provide pow function?#cmakedefine HAVE_POW<br>在代码中使用宏和函数</p>
<p>最后一步是修改 main.cc ，在代码中使用宏和函数：<br>1234567 #ifdef HAVE_POW    printf(“Now we use the standard library. \n”);    double result = pow(base, exponent);#else    printf(“Now we use our own Math library. \n”);    double result = power(base, exponent);#endif</p>
<h3 id="添加版本号"><a href="#添加版本号" class="headerlink" title="添加版本号"></a>添加版本号</h3><p>给项目添加和维护版本号是一个好习惯，这样有利于用户了解每个版本的维护情况，并及时了解当前所用的版本是否过时，或是否可能出现不兼容的情况。</p>
<p>首先修改顶层 CMakeLists 文件，在 project 命令之后加入如下两行：<br>12 set (Demo_VERSION_MAJOR 1)set (Demo_VERSION_MINOR 0)<br>分别指定当前的项目的主版本号和副版本号。</p>
<p>之后，为了在代码中获取版本信息，我们可以修改 config.h.in 文件，添加两个预定义变量：<br>123 // the configured options and settings for Tutorial#define Demo_VERSION_MAJOR @Demo_VERSION_MAJOR@#define Demo_VERSION_MINOR @Demo_VERSION_MINOR@<br>这样就可以直接在代码中打印版本信息了：<br>12345678910111213141516171819202122232425262728293031 #include #include #include #include “config.h”#include “math/MathFunctions.h”int main(int argc, char *argv[]){if (argc &lt; 3){// print version infoprintf(“%s Version %d.%d\n”,            argv[0],            Demo_VERSION_MAJOR,            Demo_VERSION_MINOR);printf(“Usage: %s base exponent \n”, argv[0]);return1;    }double base = atof(argv[1]);int exponent = atoi(argv[2]);#if defined (HAVE_POW)printf(“Now we use the standard library. \n”);double result = pow(base, exponent);#elseprintf(“Now we use our own Math library. \n”);double result = power(base, exponent);#endifprintf(“%g ^ %d is %g\n”, base, exponent, result);return0;}</p>
<h2 id="生成安装包"><a href="#生成安装包" class="headerlink" title="生成安装包"></a>生成安装包</h2><p>本节将学习如何配置生成各种平台上的安装包，包括二进制安装包和源码安装包。为了完成这个任务，我们需要用到 CPack ，它同样也是由 CMake 提供的一个工具，专门用于打包。</p>
<p>首先在顶层的 CMakeLists.txt 文件尾部添加下面几行：<br>1234567 # 构建一个 CPack 安装包include (InstallRequiredSystemLibraries)set (CPACK_RESOURCE_FILE_LICENSE  “${CMAKE_CURRENT_SOURCE_DIR}/License.txt”)set (CPACK_PACKAGE_VERSION_MAJOR “${Demo_VERSION_MAJOR}”)set (CPACK_PACKAGE_VERSION_MINOR “${Demo_VERSION_MINOR}”)include (CPack)<br>上面的代码做了以下几个工作：<br>导入 InstallRequiredSystemLibraries 模块，以便之后导入 CPack 模块；<br>设置一些 CPack 相关变量，包括版权信息和版本信息，其中版本信息用了上一节定义的版本号；<br>导入 CPack 模块。<br>接下来的工作是像往常一样构建工程，并执行 cpack 命令。<br>生成二进制安装包：<br>1 cpack -C CPackConfig.cmake<br>生成源码安装包<br>1 cpack -C CPackSourceConfig.cmake<br>我们可以试一下。在生成项目后，执行 cpack -C CPackConfig.cmake 命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[ehome@xman Demo8]$ cpack -C CPackSourceConfig.cmake</span><br><span class="line">CPack: Create package using STGZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.sh generated.</span><br><span class="line">CPack: Create package using TGZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.gz generated.</span><br><span class="line">CPack: Create package using TZ</span><br><span class="line">CPack: Install projects</span><br><span class="line">CPack: - Run preinstall target for: Demo8</span><br><span class="line">CPack: - Install project: Demo8</span><br><span class="line">CPack: Create package</span><br><span class="line">CPack: - package: /home/ehome/Documents/programming/C/power/Demo8/Demo8-1.0.1-Linux.tar.Z generated.</span><br></pre></td></tr></table></figure></p>
<p>此时会在该目录下创建 3 个不同格式的二进制包文件：<br>12 [ehome@xman Demo8]$ ls Demo8-*Demo8-1.0.1-Linux.sh  Demo8-1.0.1-Linux.tar.gz  Demo8-1.0.1-Linux.tar.Z<br>这 3 个二进制包文件所包含的内容是完全相同的。我们可以执行其中一个。此时会出现一个由 CPack 自动生成的交互式安装界面：</p>
<p>完成后提示安装到了 Demo8-1.0.1-Linux 子目录中，我们可以进去执行该程序：<br>123 [ehome@xman Demo8]$ ./Demo8-1.0.1-Linux/bin/Demo 52Now we use our own Math library. 5 ^ 2 is 25<br>关于 CPack 的更详细的用法可以通过 man 1 cpack 参考 CPack 的文档。</p>
<h2 id="将其他平台的项目迁移到-CMake"><a href="#将其他平台的项目迁移到-CMake" class="headerlink" title="将其他平台的项目迁移到 CMake"></a>将其他平台的项目迁移到 CMake</h2><p>CMake 可以很轻松地构建出在适合各个平台执行的工程环境。而如果当前的工程环境不是 CMake ，而是基于某个特定的平台，是否可以迁移到 CMake 呢？答案是可能的。下面针对几个常用的平台，列出了它们对应的迁移方案。</p>
<p>autotools<br>am2cmake 可以将 autotools 系的项目转换到 CMake，这个工具的一个成功案例是 KDE 。<br>Alternative Automake2CMake 可以转换使用 automake 的 KDevelop 工程项目。<br>Converting autoconf tests<br>qmake<br>qmake converter 可以转换使用 QT 的 qmake 的工程。<br>Visual Studio<br>vcproj2cmake.rb 可以根据 Visual Studio 的工程文件（后缀名是 .vcproj 或 .vcxproj）生成 CMakeLists.txt 文件。<br>vcproj2cmake.ps1 vcproj2cmake 的 PowerShell 版本。<br>folders4cmake 根据 Visual Studio 项目文件生成相应的 “source_group” 信息，这些信息可以很方便的在 CMake 脚本中使用。支持 Visual Studio 9/10 工程文件。<br>CMakeLists.txt 自动推导<br>gencmake 根据现有文件推导 CMakeLists.txt 文件。<br>CMakeListGenerator 应用一套文件和目录分析创建出完整的 CMakeLists.txt 文件。仅支持 Win32 平台。</p>
<h2 id="加入第三方库"><a href="#加入第三方库" class="headerlink" title="加入第三方库"></a>加入第三方库</h2><p>CMake构建工程的时候很多程序可以使用写好的库，这就会涉及到库的编译链接过程。这里使用的提到的 Ubuntu下libxml2的安装和使用xml库作为讲解示例，如何安转运行请点击链接。</p>
<p>CMakeLists.txt文件<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_MINIMUM_REQUIRED(VERSION 2.8)</span><br><span class="line">PROJECT(seglink)</span><br><span class="line"></span><br><span class="line"># compiler flags</span><br><span class="line">SET(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -std=c++11 $&#123;OpenMP_CXX_FLAGS&#125; -Wall -fPIC -D_GLIBCXX_USE_CXX11_ABI=0&quot;)</span><br><span class="line"></span><br><span class="line"># TensorFlow dependencies</span><br><span class="line">EXECUTE_PROCESS(COMMAND python3 -c &quot;import os; os.environ[&apos;TF_CPP_MIN_LOG_LEVEL&apos;]=&apos;3&apos;; import tensorflow as tf; print(tf.sysconfig.get_include())&quot;</span><br><span class="line">                OUTPUT_VARIABLE TF_INC)</span><br><span class="line">MESSAGE(STATUS &quot;Found TF_INC: &quot; $&#123;TF_INC&#125;)</span><br><span class="line"></span><br><span class="line">#MESSAGE( STATUS &quot;this var key = $&#123;USER_KEY&#125;.&quot;)</span><br><span class="line"># boost</span><br><span class="line"></span><br><span class="line"># target</span><br><span class="line">INCLUDE_DIRECTORIES($&#123;TF_INC&#125;)</span><br><span class="line">ADD_LIBRARY(seglink SHARED </span><br><span class="line">  utilities.h</span><br><span class="line">  sample_crop_bbox_op.cc</span><br><span class="line">  encode_groundtruth_op.cc</span><br><span class="line">  decode_segments_links_op.cc</span><br><span class="line">  combine_segments_op.cc</span><br><span class="line">  detection_mask_op.cc</span><br><span class="line">  clip_rboxes_op.cc</span><br><span class="line">  polygons_to_rboxes_op.cc</span><br><span class="line">  project_polygons_op.cc)</span><br></pre></td></tr></table></figure></p>
<h3 id="编译错误信息"><a href="#编译错误信息" class="headerlink" title="编译错误信息"></a>编译错误信息</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">(dl) amax@amax36:~/HGH/seglink$ python ./manage.py build_op</span><br><span class="line">[ 11%] Building CXX object CMakeFiles/seglink.dir/sample_crop_bbox_op.cc.o</span><br><span class="line">[ 22%] Building CXX object CMakeFiles/seglink.dir/detection_mask_op.cc.o</span><br><span class="line">[ 33%] Building CXX object CMakeFiles/seglink.dir/decode_segments_links_op.cc.o</span><br><span class="line">[ 44%] Building CXX object CMakeFiles/seglink.dir/encode_groundtruth_op.cc.o</span><br><span class="line">[ 55%] Building CXX object CMakeFiles/seglink.dir/combine_segments_op.cc.o</span><br><span class="line">[ 66%] Building CXX object CMakeFiles/seglink.dir/project_polygons_op.cc.o</span><br><span class="line">[ 77%] Building CXX object CMakeFiles/seglink.dir/clip_rboxes_op.cc.o</span><br><span class="line">[ 88%] Building CXX object CMakeFiles/seglink.dir/polygons_to_rboxes_op.cc.o</span><br><span class="line">In file included from /home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/tensorflow/core/platform/mutex.h:31:0,</span><br><span class="line">                 from /home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/tensorflow/core/framework/variant.h:31,</span><br><span class="line">                 from /home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/tensorflow/core/framework/allocator.h:26,</span><br><span class="line">                 from /home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/tensorflow/core/framework/op_kernel.h:23,</span><br><span class="line">                 from /home/amax/HGH/seglink/seglink/cpp/combine_segments_op.cc:10:</span><br><span class="line">/home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/tensorflow/core/platform/default/mutex.h:25:22: fatal error: nsync_cv.h: 没有那个文件或目录</span><br><span class="line">compilation terminated.</span><br><span class="line">CMakeFiles/seglink.dir/build.make:62: recipe for target &apos;CMakeFiles/seglink.dir/sample_crop_bbox_op.cc.o&apos; failed</span><br><span class="line">make[2]: *** [CMakeFiles/seglink.dir/sample_crop_bbox_op.cc.o] Error 1</span><br><span class="line">CMakeFiles/Makefile2:67: recipe for target &apos;CMakeFiles/seglink.dir/all&apos; failed</span><br><span class="line">make[1]: *** [CMakeFiles/seglink.dir/all] Error 2</span><br><span class="line">Makefile:83: recipe for target &apos;all&apos; failed</span><br><span class="line">make: *** [all] Error 2</span><br><span class="line">cp: 无法获取&apos;libseglink.so&apos; 的文件状态(stat): 没有那个文件或目录</span><br><span class="line">Building complete</span><br></pre></td></tr></table></figure>
<p>找不到头文件，因此需要修改CMakeLists.txt让让编译系统找到头文件。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">CMAKE_MINIMUM_REQUIRED(VERSION 2.8)</span><br><span class="line">PROJECT(seglink)</span><br><span class="line"></span><br><span class="line"># compiler flags</span><br><span class="line">SET(CMAKE_CXX_FLAGS &quot;$&#123;CMAKE_CXX_FLAGS&#125; -std=c++11 $&#123;OpenMP_CXX_FLAGS&#125; -Wall -fPIC -D_GLIBCXX_USE_CXX11_ABI=0&quot;)</span><br><span class="line"></span><br><span class="line"># TensorFlow dependencies</span><br><span class="line">EXECUTE_PROCESS(COMMAND python3 -c &quot;import os; os.environ[&apos;TF_CPP_MIN_LOG_LEVEL&apos;]=&apos;3&apos;; import tensorflow as tf; print(tf.sysconfig.get_include())&quot;</span><br><span class="line">                OUTPUT_VARIABLE TF_INC)</span><br><span class="line">MESSAGE(STATUS &quot;Found TF_INC: &quot; $&#123;TF_INC&#125;)</span><br><span class="line"></span><br><span class="line">#MESSAGE( STATUS &quot;this var key = $&#123;USER_KEY&#125;.&quot;)</span><br><span class="line"># boost</span><br><span class="line"></span><br><span class="line">include_directories(/home/amax/anaconda3/envs/dl/lib/python3.6/site-packages/tensorflow/include/external/nsync/public)</span><br><span class="line"></span><br><span class="line"># target</span><br><span class="line">INCLUDE_DIRECTORIES($&#123;TF_INC&#125;)</span><br><span class="line">ADD_LIBRARY(seglink SHARED </span><br><span class="line">  utilities.h</span><br><span class="line">  sample_crop_bbox_op.cc</span><br><span class="line">  encode_groundtruth_op.cc</span><br><span class="line">  decode_segments_links_op.cc</span><br><span class="line">  combine_segments_op.cc</span><br><span class="line">  detection_mask_op.cc</span><br><span class="line">  clip_rboxes_op.cc</span><br><span class="line">  polygons_to_rboxes_op.cc</span><br><span class="line">  project_polygons_op.cc)</span><br></pre></td></tr></table></figure></p>
<p>修改称上面的样子再进行编译，成功。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/04/cython-setup-py修改/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/04/cython-setup-py修改/" class="post-title-link" itemprop="url">cython-setup.py修改</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-04 10:22:01" itemprop="dateCreated datePublished" datetime="2018-09-04T10:22:01+08:00">2018-09-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-16 10:38:41" itemprop="dateModified" datetime="2018-10-16T10:38:41+08:00">2018-10-16</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>源码为linux系统的，在windows运行出现问题,找不到相关文件 bbox，查看</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fuo9lv03dcj30750cat8w.jpg" alt=""></p>
<p>发现是由cython编写的，生成的文件为.so格式，在windows下自然用不了。</p>
<p>修改setup文件，生成windows文件.pyd。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#原文件</span><br><span class="line">from Cython.Build import cythonize</span><br><span class="line">import os</span><br><span class="line">from os.path import join as pjoin</span><br><span class="line">import numpy as np</span><br><span class="line">from distutils.core import setup</span><br><span class="line">from distutils.extension import Extension</span><br><span class="line">from Cython.Distutils import build_ext</span><br><span class="line"></span><br><span class="line">def find_in_path(name, path):</span><br><span class="line">    for dir in path.split(os.pathsep):</span><br><span class="line">        binpath = pjoin(dir, name)</span><br><span class="line">        if os.path.exists(binpath):</span><br><span class="line">            return os.path.abspath(binpath)</span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line">def locate_cuda():</span><br><span class="line">    # first check if the CUDAHOME env variable is in use</span><br><span class="line">    if &apos;CUDAHOME&apos; in os.environ:</span><br><span class="line">        home = os.environ[&apos;CUDAHOME&apos;]</span><br><span class="line">        nvcc = pjoin(home, &apos;bin&apos;, &apos;nvcc&apos;)</span><br><span class="line">    else:</span><br><span class="line">        # otherwise, search the PATH for NVCC</span><br><span class="line">        default_path = pjoin(os.sep, &apos;usr&apos;, &apos;local&apos;, &apos;cuda&apos;, &apos;bin&apos;)</span><br><span class="line">        nvcc = find_in_path(&apos;nvcc&apos;, os.environ[&apos;PATH&apos;] + os.pathsep + default_path)</span><br><span class="line">        if nvcc is None:</span><br><span class="line">            raise EnvironmentError(&apos;The nvcc binary could not be &apos;</span><br><span class="line">                &apos;located in your $PATH. Either add it to your path, or set $CUDAHOME&apos;)</span><br><span class="line">        home = os.path.dirname(os.path.dirname(nvcc))</span><br><span class="line"></span><br><span class="line">    cudaconfig = &#123;&apos;home&apos;:home, &apos;nvcc&apos;:nvcc,</span><br><span class="line">                  &apos;include&apos;: pjoin(home, &apos;include&apos;),</span><br><span class="line">                  &apos;lib64&apos;: pjoin(home, &apos;lib64&apos;)&#125;</span><br><span class="line">    for k, v in cudaconfig.items():</span><br><span class="line">    #for k, v in cudaconfig.iteritems():</span><br><span class="line">        if not os.path.exists(v):</span><br><span class="line">            raise EnvironmentError(&apos;The CUDA %s path could not be located in %s&apos; % (k, v))</span><br><span class="line">    return cudaconfig</span><br><span class="line"></span><br><span class="line">CUDA = locate_cuda()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    numpy_include = np.get_include()</span><br><span class="line">except AttributeError:</span><br><span class="line">    numpy_include = np.get_numpy_include()</span><br><span class="line"></span><br><span class="line">def customize_compiler_for_nvcc(self):</span><br><span class="line">    self.src_extensions.append(&apos;.cu&apos;)</span><br><span class="line">    default_compiler_so = self.compiler_so</span><br><span class="line">    super = self._compile</span><br><span class="line">    def _compile(obj, src, ext, cc_args, extra_postargs, pp_opts):</span><br><span class="line">        print(extra_postargs)</span><br><span class="line">        if os.path.splitext(src)[1] == &apos;.cu&apos;:</span><br><span class="line">            # use the cuda for .cu files</span><br><span class="line">            self.set_executable(&apos;compiler_so&apos;, CUDA[&apos;nvcc&apos;])</span><br><span class="line">            # use only a subset of the extra_postargs, which are 1-1 translated</span><br><span class="line">            # from the extra_compile_args in the Extension class</span><br><span class="line">            postargs = extra_postargs[&apos;nvcc&apos;]</span><br><span class="line">        else:</span><br><span class="line">            postargs = extra_postargs[&apos;gcc&apos;]</span><br><span class="line"></span><br><span class="line">        super(obj, src, ext, cc_args, postargs, pp_opts)</span><br><span class="line">        # reset the default compiler_so, which we might have changed for cuda</span><br><span class="line">        self.compiler_so = default_compiler_so</span><br><span class="line">    # inject our redefined _compile method into the class</span><br><span class="line">    self._compile = _compile</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># run the customize_compiler</span><br><span class="line">class custom_build_ext(build_ext):</span><br><span class="line">    def build_extensions(self):</span><br><span class="line">        customize_compiler_for_nvcc(self.compiler)</span><br><span class="line">        build_ext.build_extensions(self)</span><br><span class="line"></span><br><span class="line">ext_modules = [</span><br><span class="line">    Extension(</span><br><span class="line">        &quot;utils.bbox&quot;,</span><br><span class="line">        [&quot;bbox.pyx&quot;],</span><br><span class="line">        extra_compile_args=&#123;&apos;gcc&apos;: [&quot;-Wno-cpp&quot;, &quot;-Wno-unused-function&quot;]&#125;,</span><br><span class="line">        include_dirs = [numpy_include]</span><br><span class="line">    ),</span><br><span class="line">    Extension(</span><br><span class="line">        &quot;utils.cython_nms&quot;,</span><br><span class="line">        [&quot;cython_nms.pyx&quot;],</span><br><span class="line">        extra_compile_args=&#123;&apos;gcc&apos;: [&quot;-Wno-cpp&quot;, &quot;-Wno-unused-function&quot;]&#125;,</span><br><span class="line">        include_dirs = [numpy_include]</span><br><span class="line">    ),</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    ext_modules=ext_modules,</span><br><span class="line">    cmdclass=&#123;&apos;build_ext&apos;: custom_build_ext&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>直接运行<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python .\setup_cpu.py build_ext --inplace</span><br></pre></td></tr></table></figure></p>
<p>出现错误<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">File &quot;setup_cpu.py&quot;, line 50, in customize_compiler_for_nvcc</span><br><span class="line">default_compiler_so = self.compiler_so</span><br><span class="line">AttributeError: &apos;MSVCCompiler&apos; object has no attribute &apos;compiler_so&apos;</span><br></pre></td></tr></table></figure></p>
<p>这里自定义的编译器为linux的gcc，需要修改<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">from Cython.Build import cythonize</span><br><span class="line">import os</span><br><span class="line">from os.path import join as pjoin</span><br><span class="line">import numpy as np</span><br><span class="line">from distutils.core import setup</span><br><span class="line">from distutils.extension import Extension</span><br><span class="line">from Cython.Distutils import build_ext</span><br><span class="line"></span><br><span class="line">def find_in_path(name, path):</span><br><span class="line">    for dir in path.split(os.pathsep):</span><br><span class="line">        binpath = pjoin(dir, name)</span><br><span class="line">        if os.path.exists(binpath):</span><br><span class="line">            return os.path.abspath(binpath)</span><br><span class="line">    return None</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">try:</span><br><span class="line">    numpy_include = np.get_include()</span><br><span class="line">except AttributeError:</span><br><span class="line">    numpy_include = np.get_numpy_include()</span><br><span class="line"></span><br><span class="line"># run the customize_compiler</span><br><span class="line">class custom_build_ext(build_ext):</span><br><span class="line">    def build_extensions(self):</span><br><span class="line">        self.compiler.src_extensions.append(&apos;.cu&apos;)</span><br><span class="line">        self.compiler.set_executable(&apos;compiler_so&apos;, &apos;nvcc&apos;)</span><br><span class="line">        self.compiler.set_executable(&apos;linker_so&apos;, &apos;nvcc --shared&apos;)</span><br><span class="line">        if hasattr(self.compiler, &apos;_c_extensions&apos;):</span><br><span class="line">            self.compiler._c_extensions.append(&apos;.cu&apos;)  # needed for Windows</span><br><span class="line">        self.compiler.spawn = self.spawn</span><br><span class="line">        build_ext.build_extensions(self)</span><br><span class="line"></span><br><span class="line">ext_modules = [</span><br><span class="line">               Extension(</span><br><span class="line">                         &quot;utils.bbox&quot;,</span><br><span class="line">                         [&quot;bbox.pyx&quot;],</span><br><span class="line">                        extra_compile_args=[&apos;-Wno-cpp&apos;, &apos;-Wno-unused-function&apos;, &apos;-std=c99&apos;],</span><br><span class="line">                         include_dirs = [numpy_include]</span><br><span class="line">                         ),</span><br><span class="line">               Extension(</span><br><span class="line">                         &quot;utils.cython_nms&quot;,</span><br><span class="line">                         [&quot;cython_nms.pyx&quot;],</span><br><span class="line">                        extra_compile_args=[&apos;-Wno-cpp&apos;, &apos;-Wno-unused-function&apos;, &apos;-std=c99&apos;],</span><br><span class="line">                         include_dirs = [numpy_include]</span><br><span class="line">                         ),]</span><br><span class="line"></span><br><span class="line">setup(</span><br><span class="line">    ext_modules=ext_modules,</span><br><span class="line">    cmdclass=&#123;&apos;build_ext&apos;: custom_build_ext&#125;,</span><br><span class="line">)</span><br></pre></td></tr></table></figure></p>
<p>运行生成build和utile文件夹，将utile中的.pyd文件拷贝出来，删除两个文件夹</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fuo9ktuvsxj308c0dnjrp.jpg" alt=""></p>
<p><a href="https://blog.csdn.net/chenzhi1992/article/details/53374265" target="_blank" rel="noopener"><strong>参考博客</strong></a></p>
<p><a href="http://docs.cython.org/en/latest/src/userguide/source_files_and_compilation.html" target="_blank" rel="noopener"><strong>cython源文件和编译</strong></a></p>
<p><a href="https://moonlet.gitbooks.io/cython-document-zh_cn/content/ch1-basic_tutorial.html" target="_blank" rel="noopener"><strong>cython官方文档</strong></a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/09/01/文本检测识别算法/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/09/01/文本检测识别算法/" class="post-title-link" itemprop="url">文本检测识别算法</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-09-01 13:43:08" itemprop="dateCreated datePublished" datetime="2018-09-01T13:43:08+08:00">2018-09-01</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-01-13 20:56:27" itemprop="dateModified" datetime="2019-01-13T20:56:27+08:00">2019-01-13</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>[TOC]</p>
<h1 id="CTPN-Connectionist-Text-Proposal-Network"><a href="#CTPN-Connectionist-Text-Proposal-Network" class="headerlink" title="CTPN(Connectionist Text Proposal Network)"></a>CTPN(Connectionist Text Proposal Network)</h1><ul>
<li><a href="https://arxiv.org/pdf/1609.03605.pdf" target="_blank" rel="noopener">论文</a></li>
<li><a href="https://github.com/Tianxiaomo/chinese-ocr" target="_blank" rel="noopener">代码</a></li>
</ul>
<h2 id="idea"><a href="#idea" class="headerlink" title="idea"></a>idea</h2><ul>
<li><p>文本检测和一般目标检测的不同——文本线是一个sequence（字符、字符的一部分、多字符组成的一个sequence），而不是一般目标检测中只有一个独立的目标。这既是优势，也是难点。优势体现在同一文本线上不同字符可以互相利用上下文，可以用sequence的方法比如RNN来表示。难点体现在要检测出一个完整的文本线，同一文本线上不同字符可能差异大，距离远，要作为一个整体检测出来难度比单个目标更大——因此，作者认为预测文本的竖直位置（文本bounding box的上下边界）比水平位置（文本bounding box的左右边界）更容易。</p>
</li>
<li><p>Top-down（先检测文本区域，再找出文本线）的文本检测方法比传统的bottom-up的检测方法（先检测字符，再串成文本线）更好。自底向上的方法的缺点在于（这点在作者的另一篇文章中说的更清楚），总结起来就是没有考虑上下文，不够鲁棒，系统需要太多子模块，太复杂且误差逐步积累，性能受限。</p>
</li>
<li><p>RNN和CNN的无缝结合可以提高检测精度。CNN用来提取深度特征，RNN用来序列的特征识别（2类），二者无缝结合，用在检测上性能更好。</p>
</li>
</ul>
<h2 id="pipeline"><a href="#pipeline" class="headerlink" title="pipeline"></a>pipeline</h2><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1futz0f6m9qj319m0du11c.jpg" alt="image"></p>
<ol>
<li>VGG16的前5个conv stage(conv5_3)作为base net得到 feature map(W<em> H </em>C)</li>
<li>在Conv5的feature map的每个位置上取3<em> 3 </em>C的窗口的特征，这些特征将用于预测该位置k个anchor（anchor的定义和Faster RCNN类似）对应的类别信息，位置信息。这个特征向量将用来预测和10个anchor之间的偏移距离，也就是说每一个窗口中心都会预测出10个text propsoal。</li>
<li>将每一行的所有窗口对应的3<em>3</em>C的特征（W<em>3</em>3<em>C）输入到RNN（BLSTM）中，得到W</em>256的输出</li>
<li>将RNN的W*256输入到512维的fc层</li>
<li>fc层特征输入到三个分类或者回归层中。第二个2k scores 表示的是k个anchor的类别信息（是字符或不是字符）。第一个2k vertical coordinate和第三个k side-refinement是用来回归k个anchor的位置信息。2k vertical coordinate表示的是bounding box的高度和中心的y轴坐标（可以决定上下边界），k个side-refinement表示的bounding box的水平平移量。这边注意，只用了3个参数表示回归的bounding box，因为这里默认了每个anchor的width是16，且不再变化（VGG16的conv5的stride是16）。回归出来的box如Fig.1中那些红色的细长矩形，它们的宽度是一定的。</li>
<li>用简单的文本线构造算法，把分类得到的文字的proposal（图Fig.1（b）中的细长的矩形）合并成文本线</li>
</ol>
<h2 id="细节"><a href="#细节" class="headerlink" title="细节"></a>细节</h2><ul>
<li>conv5的featuremap作为输入入，宽度恰好被固定为16个像素。只用来预测纵轴y即可。</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fuu21ae8bnj30rk06baax.jpg" alt="image"></p>
<p>c anchor中心，h anchor高度，a 是预测，*是实际，h是提议的高度</p>
<ul>
<li>score阈值设置：0.7 （+NMS）</li>
<li>Recurrent Connectionist Text Proposals<ul>
<li>RNN类型：BLSTM（双向LSTM），每个LSTM有128个隐含层</li>
<li>RNN输入：每个滑动窗口的3<em>3</em>C的特征（可以拉成一列），同一行的窗口的特征形成一个序列</li>
<li>RNN输出：每个窗口对应256维特征</li>
<li>使用RNN和不适用RNN的效果对比，CTPN是本文的方法（Connectionist Text Proposal Network）</li>
</ul>
</li>
</ul>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这篇文章的方法最大亮点在于把RNN引入检测问题（以前一般做识别）。文本检测，先用CNN得到深度特征，然后用固定宽度的anchor来检测text proposal（文本线的一部分），并把同一行anchor对应的特征串成序列，输入到RNN中，最后用全连接层来分类或回归，并将正确的text proposal进行合并成文本线。这种把RNN和CNN无缝结合的方法提高了检测精度。</p>
<p><a href="http://tongtianta.site/paper/667" target="_blank" rel="noopener">翻译原文</a></p>
<p><a href="https://blog.csdn.net/zchang81/article/details/78873347" target="_blank" rel="noopener">参考——1</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/37363942" target="_blank" rel="noopener">参考——2</a></p>
<h1 id="EAST-An-Efficient-and-Accurate-Scene-Text-Detector"><a href="#EAST-An-Efficient-and-Accurate-Scene-Text-Detector" class="headerlink" title="EAST: An Efficient and Accurate Scene Text Detector"></a>EAST: An Efficient and Accurate Scene Text Detector</h1><p>旷世科技 CVPR2017</p>
<ul>
<li><a href="https://arxiv.org/pdf/1704.03155v2.pdf" target="_blank" rel="noopener">论文</a></li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fyb9y9y09cj319a0fsjxz.jpg" alt="image"></p>
<h2 id="1-分析目前存在的文本检测方法总结"><a href="#1-分析目前存在的文本检测方法总结" class="headerlink" title="1.分析目前存在的文本检测方法总结"></a>1.分析目前存在的文本检测方法总结</h2><ol>
<li><p>a– Reading Text in the Wild with Convolutional Neural Networks (15年vgg实验室提出,只能检测、识别水平文字)</p>
<p> 整个方法分为两部分，1.检测，使用Region Proposal mechanism检测数文字区域，然后使用Proposal Filtering(使用的是random forest方法)过滤文字候选框，最后进行一些合并调整得到Word boxes，这部分由于Bounding Box Regression不能完全覆盖文字，导致识别错误，所以又搞了个CNN网络来调整regression framework。2.识别，使用CNN一次识别出整个单词，与以往的单词分割识别再组合不同，这部分数据是人工生成的[方法1]</p>
<p> <a href="https://blog.csdn.net/u010167269/article/details/52337213" target="_blank" rel="noopener">参考文章</a><br> <a href="https://arxiv.org/pdf/1412.1842.pdf" target="_blank" rel="noopener">论文</a></p>
</li>
<li><p>b– Multi-Oriented Text Detection with Fully Convolutional Networks (2016CVPR 白翔大佬，检测多方向文字)</p>
 <div align="center"><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fybb3s69qxj30r40j8wng.jpg" width="30%"></div>

<p> 具体方法是，将输入图片经过几层卷积得到salient map,然后使用MSER提取候选文字区域，接着候选字符提取出来，确定整个候选字符的方向，最后生成候选框</p>
<p> <a href="https://www.cnblogs.com/lillylin/p/6102708.html" target="_blank" rel="noopener">参考文章</a><br> <a href="https://arxiv.org/pdf/1604.04018.pdf" target="_blank" rel="noopener">论文</a></p>
</li>
<li><p>c – Scene Text Detection via Holistic, Multi-Channel Prediction (arXiv2016 白翔大佬在Face++的)</p>
 <div align="center"><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fybbbnd6iij30tc0n77ef.jpg" width="30%"></div>

<p> 这个主要方法是从原图中获取三个mask，分别是文本行mask，字符mask和方向mask，然后使用这三个mask获取文本框。文本行mask数据集有，那字符和方向的mask是怎么得到的呢，通过swt得到字符mask，然后获取方向的mask.</p>
 <div align="center"><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fybbd5jihsj30qo0nd7gr.jpg" width="30%"></div>

<p> 有三个mask怎么得到文本框的呢，可以是文本行mask得到一个文本框，使用字符框得到多个框再使用<a href="https://zh.wikipedia.org/zh-hans/%E5%BE%B7%E5%8B%9E%E5%85%A7%E4%B8%89%E8%A7%92%E5%8C%96" target="_blank" rel="noopener">德劳内三角化</a>,最后得到文本框。</p>
<p> <a href="https://zhuanlan.zhihu.com/p/44170391" target="_blank" rel="noopener">参考文章-1</a><br> <a href="https://www.cnblogs.com/lillylin/p/6138436.html" target="_blank" rel="noopener">参考文章-2</a><br> <a href="https://arxiv.org/pdf/1606.09002.pdf" target="_blank" rel="noopener">论文</a></p>
</li>
<li><p>d – Detecting Text in Natural Image with Connectionist Text Proposal Network (Weilin Huang——ECCV2016)</p>
<p> 这个就是大名鼎鼎的CTPN啦</p>
</li>
</ol>
<h2 id="2-Pipeline-网络结构"><a href="#2-Pipeline-网络结构" class="headerlink" title="2.Pipeline 网络结构"></a>2.Pipeline 网络结构</h2><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fybazkncntj30jf0jpwih.jpg" alt="image"></p>
<p>分为三部分：feature extractor\feature-merging\output layer</p>
<ol>
<li><p>Feature extractor 特征提取</p>
<p> 使用PVNet提取图片特征，分别抽出1/4、1/8、1/16、1/32大小的feature map</p>
</li>
<li><p>Feature merging 特征合并</p>
<p> 将上面提取的特征上采样合并，最后得到32channel的featuare</p>
</li>
<li><p>Output layer 输出层</p>
<p> 分为两部分：score map和 RBOX or QUAD</p>
<p> score map 是使用1*1的卷积核获取的。RBOX是带角度的Box，这个分为4个geomatry map和1个rotation angle。QUAD是四个坐标点，xy两轴，所以是8个。</p>
</li>
</ol>
<h2 id="3-Label-generation"><a href="#3-Label-generation" class="headerlink" title="3.Label generation"></a>3.Label generation</h2><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fyc8q16sjej30s10iyjxa.jpg" alt="image"></p>
<p>当输出4个Geomatry map和一个rototion map时，label怎么生成的呢。看上图，(a)中黄色虚线框是人工标注，绿色实现框是缩小0.3后的Label，文章说这样可以避免人工标注错误带来的误差;(b)就是score map label，白色表示文本区域，黑色表示背景;(c) 生成RBOX几何映射;(d)每个像素到矩形边界的距离有4个通道;(e)旋转角度.</p>
<h2 id="4-Loss-Function"><a href="#4-Loss-Function" class="headerlink" title="4. Loss Function"></a>4. Loss Function</h2><p>$L = L _ { \mathrm { s } } + \lambda _ { \mathrm { g } } L _ { \mathrm { g } }$</p>
<p>Ls和Lg分别代表scoreh额geomatry的loss，λg代表权重，文章设为1</p>
<p>$L _ { \mathrm {s}}= - \beta \mathbf { Y } ^{<em>}\log \hat { \mathbf { Y } } - ( 1 - \beta ) \left( 1 - \mathbf { Y } ^ { </em> } \right) \log ( 1 - \hat { \mathbf { Y } } )$</p>
<p>Ls使用的是交叉熵</p>
<p>在Geomatry生成使用RBox和Quad时用不同的Loss function</p>
<p>RBox 的loss分为AABB和R两部分，Box AABB的loss是iou</p>
<p>$L _ { \mathrm { AABB } } = - \log \operatorname { IoU } \left( \hat { \mathbf { R } } , \mathbf { R } ^ { <em> } \right) = - \log \frac { \left| \hat { \mathbf { R } } \cap \mathbf { R } ^ { </em> } \right| } { \left| \hat { \mathbf { R } } \cup \mathbf { R } ^ { * } \right| }$</p>
<p>但是这里的iou是加了权重的，是加到各个边的距离的权重,角度loss使用cos 计算</p>
<p>$L _ { \theta } \left( \hat { \theta } , \theta ^ { <em> } \right) = 1 - \cos \left( \hat { \theta } - \theta ^ { </em> } \right)$</p>
<p>下面是RBox loss的代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">loss</span><span class="params">(y_true_cls, y_pred_cls,</span></span></span><br><span class="line"><span class="function"><span class="params">         y_true_geo, y_pred_geo,</span></span></span><br><span class="line"><span class="function"><span class="params">         training_mask)</span>:</span></span><br><span class="line">    <span class="string">'''</span></span><br><span class="line"><span class="string">    define the loss used for training, contraning two part,</span></span><br><span class="line"><span class="string">    the first part we use dice loss instead of weighted logloss,</span></span><br><span class="line"><span class="string">    the second part is the iou loss defined in the paper</span></span><br><span class="line"><span class="string">    :param y_true_cls: ground truth of text</span></span><br><span class="line"><span class="string">    :param y_pred_cls: prediction os text</span></span><br><span class="line"><span class="string">    :param y_true_geo: ground truth of geometry</span></span><br><span class="line"><span class="string">    :param y_pred_geo: prediction of geometry</span></span><br><span class="line"><span class="string">    :param training_mask: mask used in training, to ignore some text annotated by ###</span></span><br><span class="line"><span class="string">    :return:</span></span><br><span class="line"><span class="string">    '''</span></span><br><span class="line">    classification_loss = dice_coefficient(y_true_cls, y_pred_cls, training_mask)</span><br><span class="line">    <span class="comment"># scale classification loss to match the iou loss part</span></span><br><span class="line">    classification_loss *= <span class="number">0.01</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># d1 -&gt; top, d2-&gt;right, d3-&gt;bottom, d4-&gt;left</span></span><br><span class="line">    d1_gt, d2_gt, d3_gt, d4_gt, theta_gt = tf.split(value=y_true_geo, num_or_size_splits=<span class="number">5</span>, axis=<span class="number">3</span>)</span><br><span class="line">    d1_pred, d2_pred, d3_pred, d4_pred, theta_pred = tf.split(value=y_pred_geo, num_or_size_splits=<span class="number">5</span>, axis=<span class="number">3</span>)</span><br><span class="line">    area_gt = (d1_gt + d3_gt) * (d2_gt + d4_gt)</span><br><span class="line">    area_pred = (d1_pred + d3_pred) * (d2_pred + d4_pred)</span><br><span class="line">    w_union = tf.minimum(d2_gt, d2_pred) + tf.minimum(d4_gt, d4_pred)</span><br><span class="line">    h_union = tf.minimum(d1_gt, d1_pred) + tf.minimum(d3_gt, d3_pred)</span><br><span class="line">    area_intersect = w_union * h_union</span><br><span class="line">    area_union = area_gt + area_pred - area_intersect</span><br><span class="line">    L_AABB = -tf.log((area_intersect + <span class="number">1.0</span>)/(area_union + <span class="number">1.0</span>))</span><br><span class="line">    L_theta = <span class="number">1</span> - tf.cos(theta_pred - theta_gt)</span><br><span class="line">    tf.summary.scalar(<span class="string">'geometry_AABB'</span>, tf.reduce_mean(L_AABB * y_true_cls * training_mask))</span><br><span class="line">    tf.summary.scalar(<span class="string">'geometry_theta'</span>, tf.reduce_mean(L_theta * y_true_cls * training_mask))</span><br><span class="line">    L_g = L_AABB + <span class="number">20</span> * L_theta</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> tf.reduce_mean(L_g * y_true_cls * training_mask) + classification_loss</span><br></pre></td></tr></table></figure>
<p>Quad loss, ⚆_⚆ 没看懂怎么做的，也没有代码，这里仅贴个公式吧。</p>
<p>$L _ { \mathrm { g } } = L _ { \mathrm { QUAD } } \left( \hat { \mathbf { Q } } , \mathbf { Q } ^ { <em> } \right) = \min _ { \mathbf { Q } \in P _ { Q ^ { </em> } } } \sum _ { c _ { i } \in \mathbb { C } _ { \mathbf { Q } } } \frac { \operatorname { smoothed } _ { L 1 } \left( c _ { i } - \tilde { c } _ { i } \right) } { 8 \times N _ { \mathbf { Q } ^ { * } } }$</p>
<h2 id="5-Locality-Aware-NMS"><a href="#5-Locality-Aware-NMS" class="headerlink" title="5. Locality-Aware NMS"></a>5. Locality-Aware NMS</h2><p>locality_aware_nms在标准nms的基础上加了weighted_merge，所谓weighted_merge就是将2个IOU高于某个threshold的输出框，进行基于得分的合并。合并后的输出框的坐标数值介于2个合并的输入框之间，感觉这样操作可以将所有回归出的框的坐标信息都利用起来，有助于减少位置误差，而不是像传统的nms一样，直接取分数最高的那个。</p>
<p><a href="https://blog.csdn.net/qq_14845119/article/details/78986449" target="_blank" rel="noopener">参考文章_1</a></p>
<p><a href="https://blog.csdn.net/sparkexpert/article/details/77987654" target="_blank" rel="noopener">参考文章_2</a></p>
<p><a href="http://www.voidcn.com/article/p-kmdkakvk-bqs.html" target="_blank" rel="noopener">参考文章_3</a></p>
<p><a href="https://my.oschina.net/clgo/blog/1577724" target="_blank" rel="noopener">参考文章_4</a></p>
<h1 id="AdvancedEAST"><a href="#AdvancedEAST" class="headerlink" title="AdvancedEAST"></a>AdvancedEAST</h1><ul>
<li>[代码]（<a href="https://github.com/huoyijie/AdvancedEAST）" target="_blank" rel="noopener">https://github.com/huoyijie/AdvancedEAST）</a></li>
</ul>
<h1 id="Seglink-Detecting-Oriented-Text-in-Natural-Images-by-Linking-Segments"><a href="#Seglink-Detecting-Oriented-Text-in-Natural-Images-by-Linking-Segments" class="headerlink" title="Seglink (Detecting Oriented Text in Natural Images by Linking Segments)"></a>Seglink (Detecting Oriented Text in Natural Images by Linking Segments)</h1><p><a href="https://arxiv.org/pdf/1703.06520.pdf" target="_blank" rel="noopener">论文</a></p>
<p><a href="https://github.com/bgshih/seglink" target="_blank" rel="noopener">代码</a></p>
<h2 id="1-idea"><a href="#1-idea" class="headerlink" title="1. idea"></a>1. idea</h2><ul>
<li>提出了文本行检测的两个基本组成元素：==segment==和==link==</li>
<li>提出了基于SSD的改进版网络结构(全卷积网络结果)同时预测不同尺度的segments和link</li>
<li>提出了两种link类型:　层内连接(within-layer link)和跨层连接(cross-layer link)</li>
<li>可以处理多方向和任意长度的文本</li>
<li>Pipeline</li>
<li>整个实现过程包括两部分：首先检测segments,links，然后使用融合算法得到最终文本行．具体步骤如下：</li>
</ul>
<h2 id="2-Pipeline"><a href="#2-Pipeline" class="headerlink" title="2. Pipeline"></a>2. Pipeline</h2><p>主干网络是沿用了SSD网络结构，并修改修改了最后的Pooling层，将其改为卷积层．</p>
<ul>
<li>首先用VGG16作为base net，并将VGG16的最后两个全连接层改成卷积层．</li>
<li>接着增加一些额外的卷积层，用于提取更深的特征，最后的修改SSD的Pooling层，将其改为卷积层提取不同层的feature map，文中提取了conv4_3, conv7, conv8_2, conv9_2, conv10_2, conv11．这里其实操作还是和SSD网络一样,对不同层的featuremap使用３＊３的卷积层产生最终的输出(包括segment和link)，不同特征层输出的维度是不一样的，因为除了conv4_3层外，其它层存在跨层的link．这里segment是text的带方向bbox信息(它可能是个单词，也可能是几个字符，总之是文本行的部分)，link是不同bbox的连接信息(文章将其也增加到网络中自动学习)．</li>
<li>然后通过融合规则，将segment的box信息和link信息进行融合，得到最终的文本行．</li>
</ul>
<h1 id="PixelLink"><a href="#PixelLink" class="headerlink" title="PixelLink"></a>PixelLink</h1><ul>
<li><a href="https://arxiv.org/abs/1801.01315" target="_blank" rel="noopener">论文</a></li>
<li><a href="https://github.com/ZJULearning/pixel_link" target="_blank" rel="noopener">代码</a></li>
</ul>
<h2 id="1-Abstract"><a href="#1-Abstract" class="headerlink" title="1. Abstract"></a>1. Abstract</h2><p>基于语义分割的文本检测会有文本彼此接近导致它们很难分离.这篇文章使用将同一实例像素连接在一起进行分割。</p>
<p>以前的方法都至少包含两中分类：</p>
<ol>
<li>文本\非文本分类(SegLink\EAST\TextBoxes)</li>
<li>位置回归 (SegLink\CTPN\EAST)</li>
</ol>
<p>PixelLink受Seglink启发，分别预测文本、非文本和相邻8个像素的连接.</p>
<h2 id="2-Network-Architecture"><a href="#2-Network-Architecture" class="headerlink" title="2. Network Architecture"></a>2. Network Architecture</h2><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fydgo4j90dj314i0m4h36.jpg" alt="image"></p>
<p>PixelLink的架构。训练CNN模型以执行两种基于像素的预测：文本/非文本预测和链接预测。经过阈值处理后，通过正向链接将正像素连接在一起，实现实例分割。然后应用minAreaRect直接从分割结果中提取边界框。使用后置滤波可以有效地消除噪音预测。为了更好地说明输入样本。虚线框中的八个热图代表八个方向上的链接预测。虽然有些词在文本/非文本预测中难以分离，但它们可以通过链接预测分离。</p>
<h3 id="2-1-PixelLink-VGG16-2s"><a href="#2-1-PixelLink-VGG16-2s" class="headerlink" title="2.1 PixelLink + VGG16 2s"></a>2.1 PixelLink + VGG16 2s</h3><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fydgih0khqj30j70m6n0m.jpg" alt="image"></p>
<p>PixelLink + VGG16 2s(2s表示预测图是原始图的一半)的结构。 fc6和fc7被提换成卷积层。上采样操作直接通过双线性插值完成。来自不同阶段的特征地图通过上采样和增加操作的级联进行融合。除pool5外的所有池层都采用2步幅，而pool5则采用1。因此，fc7的大小与conv5_3相同，因此合并时不需要上采样。conv 1x1,2(16) 代表具有2或16个内核的卷积层，分别用于文本/非文本预测或链接预测。</p>
<h3 id="2-2-Linking-Pixels-Together"><a href="#2-2-Linking-Pixels-Together" class="headerlink" title="2.2 Linking Pixels Together"></a>2.2 Linking Pixels Together</h3><p>像素连接过程使用两个像素查看是否同时连接，这样才将它们看成一个连接组建。</p>
<h3 id="2-3-Extraction-of-Bounding-Box"><a href="#2-3-Extraction-of-Bounding-Box" class="headerlink" title="2.3 Extraction of Bounding Box"></a>2.3 Extraction of Bounding Box</h3><p>使用miniAreaRect提取连接组建的最小外接矩形。这一步可以看出PixelLink和基于回归的方法之间的本质区别，即边界框直接从实例分割中获得，而不是位置回归。</p>
<h3 id="2-4-Filter"><a href="#2-4-Filter" class="headerlink" title="2.4 Filter"></a>2.4 Filter</h3><p>使用边界框的几何特征进行过滤</p>
<h2 id="3-Loss"><a href="#3-Loss" class="headerlink" title="3. Loss"></a>3. Loss</h2><p>$L = \lambda L _ { p i x e l } + L _ { l i n k }$</p>
<p>Lpixel 是像素分类Loss，Llink 是连接Loss。由于分任务更重要，λ设为2.</p>
<ul>
<li><p>Pixel loss</p>
<p>  图片中文字的大小可能差异很大，这样对于那些小文字就不太友好。因此使用了一种新的损失函数，Balance Cross-Entropy(平衡交叉熵)，就是为了让每个实例的权重相同。</p>
<p>  设第i个实例的面积为$S_i$ , 其上每个像素的权重为$w _ { i } = \frac { B _ { i } } { S _ { i } }$ ，$B_i$ 是实例平均像素数<br>  $B _ { i } = \frac { S } { N } , S = \sum _ { i } S _ { i } , \forall i \in { 1 , \ldots , N }$</p>
<p>  对于正负样本不平衡问题采用OHEM解决。最后的pixel loss,S实例总面积，r取3.<br>  $L _ { p i x e l } = \frac { 1 } { ( 1 + r ) S } W L _ { p i x e l _ { - } C E }$</p>
</li>
<li><p>Link loss</p>
<p>  正连接和负连接分别计算。<br>  $L_{link_{-} CE}$是链路预测的交叉熵损失矩阵。$W_{pos-link}$ 和 $W_{nge-link}$分别是正面和负面链接的权重。具体计算方法，对于像素 (i,j) 的第k个邻居：</p>
<p>  $\begin{aligned} L _ { l i n k _ { - } p o s } &amp; = W _ { p o s - l i n k } L _ { l i n k _ { - } C E } \ L _ { l i n k _ { - } n e g } &amp; = W _ { n e g _ { - } l i n k } L _ { l i n k _ { - } C E } \end{aligned}$</p>
<p>  $\begin{aligned} W _ { p o s - l i n k } ( i , j , k ) &amp; = W ( i , j ) <em> \left( Y _ { l i n k } ( i , j , k ) = = 1 \right) \ W _ { n e g _ { - } l i n k } ( i , j , k ) &amp; = W ( i , j ) </em> \left( Y _ { l i n k } ( i , j , k ) = = 0 \right) \end{aligned}$</p>
</li>
</ul>
<h2 id="4-Summary"><a href="#4-Summary" class="headerlink" title="4. Summary"></a>4. Summary</h2><ul>
<li>与CTPN，EAST，SegLink相比，PixelLink放弃了边框回归方法来检测文本行的bbox，而是采用实例分割方法，直接从分割的文本行区域得到文本行的bbox．PixelLink可以以更少额数据和更快地速度进行训练．</li>
<li>假设提取特征的主干网络结构采用VGG16(当然你也可以采用其它主干网络结构)，PixelLink不需要在imagenet预训练的模型上进行fine-tuned（即直接从头开始训练），而CTPN，EAST，SegLink都需要在imagenet预训练的模型上进行fine-tuned</li>
<li>与CTPN，EAST，SegLink相比，PixelLink对感受野的要求更少，因为每个神经元值只负责预测自己及其邻域内的状态．<br>与SegLink一样，不能检测很大的文本，这是因为link主要是用于连接相邻的segments，而不能用于检测相距较远的文本行</li>
</ul>
<p><a href="https://zhuanlan.zhihu.com/p/38171172" target="_blank" rel="noopener">参考文章_1</a></p>
<p><a href="https://blog.csdn.net/qq_14845119/article/details/80953555" target="_blank" rel="noopener">参考文章_2</a></p>
<p><a href="https://blog.csdn.net/Missayaaa/article/details/81137312" target="_blank" rel="noopener">参考文章_3</a></p>
<h1 id="Pixel-Anchor-A-Fast-Oriented-Scene-Text-Detector-with-Combined-Networks"><a href="#Pixel-Anchor-A-Fast-Oriented-Scene-Text-Detector-with-Combined-Networks" class="headerlink" title="Pixel-Anchor: A Fast Oriented Scene Text Detector with Combined Networks"></a>Pixel-Anchor: A Fast Oriented Scene Text Detector with Combined Networks</h1><p><a href="https://arxiv.org/abs/1811.07432" target="_blank" rel="noopener">论文</a></p>
<h1 id="TextBoxes"><a href="#TextBoxes" class="headerlink" title="TextBoxes"></a>TextBoxes</h1><ul>
<li><a href="https://arxiv.org/abs/1611.06779" target="_blank" rel="noopener">论文</a></li>
<li><a href="https://github.com/MhLiao/TextBoxes" target="_blank" rel="noopener">代码</a></li>
</ul>
<h2 id="1-Abstract-1"><a href="#1-Abstract-1" class="headerlink" title="1. Abstract"></a>1. Abstract</h2><p>TextBoxes的灵感来源于SSD,SSD旨在检测图像中的一般物体，但无法识别具有极高宽高比的字。在TextBoxes中提出了文本框图层来解决这个问题.</p>
<h2 id="2-Architecture"><a href="#2-Architecture" class="headerlink" title="2. Architecture"></a>2. Architecture</h2><p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fyfv857pltj311v0fkadp.jpg" alt="image"></p>
<p>TextBoxes架构TextBoxes是一个28层完全卷积网络。其中13个是从VGG-16继承的。在VGG-16层之后增加了9个额外的卷积层。文本框图层连接到6个卷积图层。在每个Map上，文本框图层预测72个向量，它们是12个默认框的分数（2-d）和偏移量（4-d）。对所有文本框图层的聚合输出应用非最大抑制。</p>
<ul>
<li><p>文本框层</p>
<p>假设图像和特征图大小分别是Xim\Yim）和Xmap\Ymap）。在feature map位置(i,j)一个默认框$\mathbf { b } _ { 0 } = \left( x _ { 0 } , y _ { 0 } , w _ { 0 } , h _ { 0 } \right)$,文本框输出层预测输出$( \Delta x , \Delta y , \Delta w , \Delta h , c )$，对应在原图上$\mathbf { b } = ( x , y , w , h )$</p>
<p>$\begin{aligned} x &amp; = x _ { 0 } + w _ { 0 } \Delta x \ y &amp; = y _ { 0 } + h _ { 0 } \Delta y \ w &amp; = w _ { 0 } \exp ( \Delta w ) \ h &amp; = h _ { 0 } \exp ( \Delta h ) \end{aligned}$</p>
</li>
</ul>
<p>与一般物体不同，单词文本倾向于具有较大的宽高比。因此，使用包含具有较大宽高比的“长”默认框。具体而言，我们为默认box定义6种纵横比，包括1,2,3,5,7和10。但是，这会使默认框在水平方向密集而垂直稀疏，这会导致较差的匹配框。为了解决这个问题，每个默认框都设置了垂直偏移。</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fygody4oo0j30ox0mqdgo.jpg" alt="image"></p>
<p>而且，在文本框图层中，采用不规则的1 <em> 5卷积滤波器而不是标准的3 </em> 3卷积滤波器。这种初始式滤波器可以产生矩形的接收区域，它可以更好地融合具有较大纵横比的字，还可以避免方形接收区带来的噪声信号。</p>
<h2 id="3-Loss-1"><a href="#3-Loss-1" class="headerlink" title="3.Loss"></a>3.Loss</h2><p>$L ( x , c , l , g ) = \frac { 1 } { N } \left( L _ { \mathrm { conf } } ( x , c ) + \alpha L _ { \mathrm { loc } } ( x , l , g ) \right)$</p>
<p>分为位置loss和置信度loss的加权和</p>
<p><a href="https://www.cnblogs.com/lillylin/p/6204099.html" target="_blank" rel="noopener">参考文章_1</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/33544892" target="_blank" rel="noopener">参考文章_2</a></p>
<p><a href="https://www.jianshu.com/p/b3c1a2f27dec" target="_blank" rel="noopener">参考文章_3</a></p>
<h1 id="TextBoxes-1"><a href="#TextBoxes-1" class="headerlink" title="TextBoxes++"></a>TextBoxes++</h1><ul>
<li><a href="https://arxiv.org/pdf/1801.02765v3.pdf" target="_blank" rel="noopener">论文</a></li>
<li><a href="https://github.com/MhLiao/TextBoxes_plusplus" target="_blank" rel="noopener">代码</a></li>
</ul>
<h1 id="TextSpotter"><a href="#TextSpotter" class="headerlink" title="TextSpotter"></a>TextSpotter</h1><h1 id="SPCNet"><a href="#SPCNet" class="headerlink" title="SPCNet"></a>SPCNet</h1><h1 id="FOST"><a href="#FOST" class="headerlink" title="FOST"></a>FOST</h1><ul>
<li><a href="https://arxiv.org/abs/1801.01671" target="_blank" rel="noopener">论文</a></li>
<li>代码没放出来，github上别人实现的都没有识别分支（* ￣ー￣），这给EAST有什么区别，你们实现了什么啊</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fyedmxoh9uj30qp0jpncx.jpg" alt="image"></p>
<p>看到没就是快</p>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqly1fyedr3fr4jj31cp0a1guz.jpg" alt="image"></p>
<p><a href="https://zhuanlan.zhihu.com/p/38655369" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/38655369</a><br><a href="https://www.cnblogs.com/skyfsm/p/9776611.html" target="_blank" rel="noopener">https://www.cnblogs.com/skyfsm/p/9776611.html</a><br><a href="https://zhuanlan.zhihu.com/p/39796620" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/39796620</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/28/命名空间/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="田小默">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="田小默的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2018/08/28/命名空间/" class="post-title-link" itemprop="url">命名空间</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-28 10:33:45" itemprop="dateCreated datePublished" datetime="2018-08-28T10:33:45+08:00">2018-08-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2018-10-16 10:42:58" itemprop="dateModified" datetime="2018-10-16T10:42:58+08:00">2018-10-16</time>
              
            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="为什么存在命名空间"><a href="#为什么存在命名空间" class="headerlink" title="为什么存在命名空间"></a>为什么存在命名空间</h1><p>随着项目的增大，名称相互冲突的可能性也再增加，不同成员、不同厂商的命名可能出现冲突，不兼容等问题。为了解决这种冲突，命名空间出现了。</p>
<h2 id="默认存在命名空间"><a href="#默认存在命名空间" class="headerlink" title="默认存在命名空间"></a>默认存在命名空间</h2><h3 id="声明区域-declaration-region"><a href="#声明区域-declaration-region" class="headerlink" title="声明区域(declaration region)"></a>声明区域(declaration region)</h3><p>可以在其中声明的区域</p>
<ul>
<li>全局声明：在函数外部声明</li>
<li>局部声明：在函数内部声明<h3 id="潜在作用区域"><a href="#潜在作用区域" class="headerlink" title="潜在作用区域"></a>潜在作用区域</h3>从声明点开始 –&gt; 声明区域末尾</li>
</ul>
<p><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fupifijdfvj309y0d6aah.jpg" alt=""><br><img src="https://ws1.sinaimg.cn/large/005PF9Rqgy1fupij3dwdbj30c60a1jvm.jpg" alt=""></p>
<h2 id="自定义的命名空间"><a href="#自定义的命名空间" class="headerlink" title="自定义的命名空间"></a>自定义的命名空间</h2><p>自定义命名空间，提供一个声明名称的区域，一个命名空间中的名称不会与另一个命名空间中的名称冲突，同时其他部分可以使用命名空间中的东西。关键字：namespace</p>
<h3 id="using-声明-v-s-using-编译指令"><a href="#using-声明-v-s-using-编译指令" class="headerlink" title="using 声明 v.s using 编译指令"></a>using 声明 v.s using 编译指令</h3><p>先留个坑，慢慢填</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.gif" alt="田小默">
            
              <p class="site-author-name" itemprop="name">田小默</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">33</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">21</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/tianxiaomo" title="GitHub &rarr; https://github.com/tianxiaomo" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://weibo.com/tianxiaoxiaomo" title="Weibo &rarr; https://weibo.com/tianxiaoxiaomo" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.zhihu.com/people/tian-mo-98-60" title="Zhihu &rarr; https://www.zhihu.com/people/tian-mo-98-60" rel="noopener" target="_blank"><i class="fa fa-fw fa-globe"></i>Zhihu</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">田小默</span>

  

  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v6.6.0</div>





    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">总访问量<span id="busuanzi_value_site_pv"></span>次</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">总访客<span id="busuanzi_value_site_uv"></span>人</span>
    <span class="post-meta-divider">|</span>



        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script src="/js/src/utils.js?v=6.6.0"></script>

  <script src="/js/src/motion.js?v=6.6.0"></script>



  
  


  <script src="/js/src/affix.js?v=6.6.0"></script>

  <script src="/js/src/schemes/pisces.js?v=6.6.0"></script>



  

  


  <script src="/js/src/bootstrap.js?v=6.6.0"></script>



  



  











  





  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
    overflow: auto hidden;
}
</style>

    
  


  
  

  

  

  

  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  


</body>
</html>
